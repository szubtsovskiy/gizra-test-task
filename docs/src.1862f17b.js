parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"bmN7":[function(require,module,exports) {
!function(n){"use strict";function r(n,r,e){return e.a=n,e.f=r,e}function e(n){return r(2,n,function(r){return function(e){return n(r,e)}})}function t(n){return r(3,n,function(r){return function(e){return function(t){return n(r,e,t)}}})}function u(n){return r(4,n,function(r){return function(e){return function(t){return function(u){return n(r,e,t,u)}}}})}function i(n){return r(5,n,function(r){return function(e){return function(t){return function(u){return function(i){return n(r,e,t,u,i)}}}}})}function f(n,r,e){return 2===n.a?n.f(r,e):n(r)(e)}function a(n,r,e,t){return 3===n.a?n.f(r,e,t):n(r)(e)(t)}function o(n,r,e,t,u){return 4===n.a?n.f(r,e,t,u):n(r)(e)(t)(u)}function c(n,r,e,t,u,i){return 5===n.a?n.f(r,e,t,u,i):n(r)(e)(t)(u)(i)}var v=t(function(n,r,e){for(var t=[],u=0;n>u;u++)t[u]=e(r+u);return t}),s=e(function(n,r){for(var e=[],t=0;n>t&&r.b;t++)e[t]=r.a,r=r.b;return e.length=t,d(e,r)});function l(n){throw Error("https://github.com/elm/core/blob/1.0.0/hints/"+n+".md")}function d(n,r){return{a:n,b:r}}var b={$:0};function h(n,r){return{$:1,a:n,b:r}}var g=e(h);function $(n){for(var r=b,e=n.length;e--;)r=h(n[e],r);return r}var p=Math.ceil,m=Math.floor,y=Math.log;function j(n){return{$:2,b:n}}j(function(n){return"number"!=typeof n?C("an INT",n):n>-2147483647&&2147483647>n&&(0|n)===n?ur(n):!isFinite(n)||n%1?C("an INT",n):ur(n)}),j(function(n){return"boolean"==typeof n?ur(n):C("a BOOL",n)}),j(function(n){return"number"==typeof n?ur(n):C("a FLOAT",n)}),j(function(n){return ur(z(n))});var A=j(function(n){return"string"==typeof n?ur(n):n instanceof String?ur(n+""):C("a STRING",n)}),_=e(function(n,r){return{$:6,d:n,b:r}}),k=e(function(n,r){return{$:7,e:n,b:r}});var w=e(function(n,r){return{$:10,b:r,h:n}}),N=e(function(n,r){return function(n,r){return{$:9,f:n,g:r}}(n,[r])}),E=e(function(n,r){return F(n,B(r))});function F(n,r){switch(n.$){case 2:return n.b(r);case 5:return null===r?ur(n.c):C("null",r);case 3:return x(r)?L(n.b,r,$):C("a LIST",r);case 4:return x(r)?L(n.b,r,T):C("an ARRAY",r);case 6:var e=n.d;if("object"!=typeof r||null===r||!(e in r))return C("an OBJECT with a field named `"+e+"`",r);var t=F(n.b,r[e]);return Bn(t)?t:tr(f(fr,e,t.a));case 7:var u=n.e;return x(r)?r.length>u?(t=F(n.b,r[u]),Bn(t)?t:tr(f(ar,u,t.a))):C("a LONGER array. Need index "+u+" but only see "+r.length+" entries",r):C("an ARRAY",r);case 8:if("object"!=typeof r||null===r||x(r))return C("an OBJECT",r);var i=b;for(var a in r)if(r.hasOwnProperty(a)){if(t=F(n.b,r[a]),!Bn(t))return tr(f(fr,a,t.a));i=h(d(a,t.a),i)}return ur(Yn(i));case 9:for(var o=n.f,c=n.g,v=0;c.length>v;v++){if(t=F(c[v],r),!Bn(t))return t;o=o(t.a)}return ur(o);case 10:return t=F(n.b,r),Bn(t)?F(n.h(t.a),r):t;case 11:for(var s=b,l=n.g;l.b;l=l.b){if(t=F(l.a,r),Bn(t))return t;s=h(t.a,s)}return tr(or(Yn(s)));case 1:return tr(f(ir,n.a,z(r)));case 0:return ur(n.a)}}function L(n,r,e){for(var t=r.length,u=[],i=0;t>i;i++){var a=F(n,r[i]);if(!Bn(a))return tr(f(ar,i,a.a));u[i]=a.a}return ur(e(u))}function x(n){return Array.isArray(n)||"undefined"!=typeof FileList&&n instanceof FileList}function T(n){return f(nr,n.length,function(r){return n[r]})}function C(n,r){return tr(f(ir,"Expecting "+n,z(r)))}function q(n,r){if(n===r)return!0;if(n.$!==r.$)return!1;switch(n.$){case 0:case 1:return n.a===r.a;case 2:return n.b===r.b;case 5:return n.c===r.c;case 3:case 4:case 8:return q(n.b,r.b);case 6:return n.d===r.d&&q(n.b,r.b);case 7:return n.e===r.e&&q(n.b,r.b);case 9:return n.f===r.f&&O(n.g,r.g);case 10:return n.h===r.h&&q(n.b,r.b);case 11:return O(n.g,r.g)}}function O(n,r){var e=n.length;if(e!==r.length)return!1;for(var t=0;e>t;t++)if(!q(n[t],r[t]))return!1;return!0}function z(n){return n}function B(n){return n}function R(n){return{$:0,a:n}}function S(n){return{$:2,b:n,c:null}}z(null);var M=e(function(n,r){return{$:3,b:n,d:r}}),I=0;function D(n){var r={$:0,e:I++,f:n,g:null,h:[]};return J(r),r}var P=!1,G=[];function J(n){if(G.push(n),!P){for(P=!0;n=G.shift();)Y(n);P=!1}}function Y(n){for(;n.f;){var r=n.f.$;if(0===r||1===r){for(;n.g&&n.g.$!==r;)n.g=n.g.i;if(!n.g)return;n.f=n.g.b(n.f.a),n.g=n.g.i}else{if(2===r)return void(n.f.c=n.f.b(function(r){n.f=r,J(n)}));if(5===r){if(0===n.h.length)return;n.f=n.f.b(n.h.shift())}else n.g={$:3===r?0:1,b:n.f.b,i:n.g},n.f=n.f.d}}}var K={};function W(n,r){var e={g:r,h:void 0},t=n.c,u=n.d,i=n.e,c=n.f;function v(n){return f(M,v,{$:5,b:function(r){var f=r.a;return 0===r.$?a(u,e,f,n):i&&c?o(t,e,f.i,f.j,n):a(t,e,i?f.i:f.j,n)}})}return e.h=D(f(M,v,n.b))}var H,Q=e(function(n,r){return S(function(e){n.g(r),e(R(0))})});function U(n){return{$:2,m:n}}function V(n,r,e){var t,u={};for(var i in X(!0,r,u,null),X(!1,e,u,null),n)(t=n[i]).h.push({$:"fx",a:u[i]||{i:b,j:b}}),J(t)}function X(n,r,e,t){switch(r.$){case 1:var u=r.k,i=function(n,e,t){function u(n){for(var r=t;r;r=r.q)n=r.p(n);return n}return f(n?K[e].e:K[e].f,u,r.l)}(n,u,t);return void(e[u]=function(n,r,e){return e=e||{i:b,j:b},n?e.i=h(r,e.i):e.j=h(r,e.j),e}(n,i,e[u]));case 2:for(var a=r.m;a.b;a=a.b)X(n,a.a,e,t);return;case 3:return void X(n,r.o,e,{p:r.n,q:t})}}var Z="undefined"!=typeof document?document:{};function nn(n,r){n.appendChild(r)}function rn(n){return{$:0,a:n}}var en=e(function(n,r){return e(function(e,t){for(var u=[],i=0;t.b;t=t.b){var f=t.a;i+=f.b||0,u.push(f)}return i+=u.length,{$:1,c:r,d:on(e),e:u,f:n,b:i}})})(void 0);e(function(n,r){return e(function(e,t){for(var u=[],i=0;t.b;t=t.b){var f=t.a;i+=f.b.b||0,u.push(f)}return i+=u.length,{$:2,c:r,d:on(e),e:u,f:n,b:i}})})(void 0);var tn,un=e(function(n,r){return{$:"a0",n:n,o:r}}),fn=e(function(n,r){return{$:"a2",n:n,o:r}}),an=e(function(n,r){return{$:"a3",n:n,o:r}});function on(n){for(var r={};n.b;n=n.b){var e=n.a,t=e.$,u=e.n,i=e.o;if("a2"!==t){var f=r[t]||(r[t]={});"a3"===t&&"class"===u?cn(f,u,i):f[u]=i}else"className"===u?cn(r,u,B(i)):r[u]=B(i)}return r}function cn(n,r,e){var t=n[r];n[r]=t?t+" "+e:e}function vn(n,r){var e=n.$;if(5===e)return vn(n.k||(n.k=n.m()),r);if(0===e)return Z.createTextNode(n.a);if(4===e){for(var t=n.k,u=n.j;4===t.$;)"object"!=typeof u?u=[u,t.j]:u.push(t.j),t=t.k;var i={j:u,p:r};return(f=vn(t,i)).elm_event_node_ref=i,f}if(3===e)return sn(f=n.h(n.g),r,n.d),f;var f=n.f?Z.createElementNS(n.f,n.c):Z.createElement(n.c);H&&"a"==n.c&&f.addEventListener("click",H(f)),sn(f,r,n.d);for(var a=n.e,o=0;a.length>o;o++)nn(f,vn(1===e?a[o]:a[o].b,r));return f}function sn(n,r,e){for(var t in e){var u=e[t];"a1"===t?ln(n,u):"a0"===t?hn(n,r,u):"a3"===t?dn(n,u):"a4"===t?bn(n,u):("value"!==t&&"checked"!==t||n[t]!==u)&&(n[t]=u)}}function ln(n,r){var e=n.style;for(var t in r)e[t]=r[t]}function dn(n,r){for(var e in r){var t=r[e];void 0!==t?n.setAttribute(e,t):n.removeAttribute(e)}}function bn(n,r){for(var e in r){var t=r[e],u=t.f,i=t.o;void 0!==i?n.setAttributeNS(u,e,i):n.removeAttributeNS(u,e)}}function hn(n,r,e){var t=n.elmFs||(n.elmFs={});for(var u in e){var i=e[u],f=t[u];if(i){if(f){if(f.q.$===i.$){f.q=i;continue}n.removeEventListener(u,f)}f=gn(r,i),n.addEventListener(u,f,tn&&{passive:2>wr(i)}),t[u]=f}else n.removeEventListener(u,f),t[u]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){tn=!0}}))}catch(n){}function gn(n,r){function e(r){var t=e.q,u=F(t.a,r);if(Bn(u)){for(var i,f=wr(t),a=u.a,o=f?3>f?a.a:a.k:a,c=1==f?a.b:3==f&&a.M,v=(c&&r.stopPropagation(),(2==f?a.b:3==f&&a.K)&&r.preventDefault(),n);i=v.j;){if("function"==typeof i)o=i(o);else for(var s=i.length;s--;)o=i[s](o);v=v.p}v(o,c)}}return e.q=r,e}function $n(n,r){return n.$==r.$&&q(n.a,r.a)}function pn(n,r,e,t){var u={$:r,r:e,s:t,t:void 0,u:void 0};return n.push(u),u}function mn(n,r,e,t){if(n!==r){var u=n.$,i=r.$;if(u!==i){if(1!==u||2!==i)return void pn(e,0,t,r);r=function(n){for(var r=n.e,e=r.length,t=[],u=0;e>u;u++)t[u]=r[u].b;return{$:1,c:n.c,d:n.d,e:t,f:n.f,b:n.b}}(r),i=1}switch(i){case 5:for(var f=n.l,a=r.l,o=f.length,c=o===a.length;c&&o--;)c=f[o]===a[o];if(c)return void(r.k=n.k);r.k=r.m();var v=[];return mn(n.k,r.k,v,0),void(v.length>0&&pn(e,1,t,v));case 4:for(var s=n.j,l=r.j,d=!1,b=n.k;4===b.$;)d=!0,"object"!=typeof s?s=[s,b.j]:s.push(b.j),b=b.k;for(var h=r.k;4===h.$;)d=!0,"object"!=typeof l?l=[l,h.j]:l.push(h.j),h=h.k;return d&&s.length!==l.length?void pn(e,0,t,r):((d?function(n,r){for(var e=0;n.length>e;e++)if(n[e]!==r[e])return!1;return!0}(s,l):s===l)||pn(e,2,t,l),void mn(b,h,e,t+1));case 0:return void(n.a!==r.a&&pn(e,3,t,r.a));case 1:return void yn(n,r,e,t,An);case 2:return void yn(n,r,e,t,_n);case 3:if(n.h!==r.h)return void pn(e,0,t,r);var g=jn(n.d,r.d);g&&pn(e,4,t,g);var $=r.i(n.g,r.g);return void($&&pn(e,5,t,$))}}}function yn(n,r,e,t,u){if(n.c===r.c&&n.f===r.f){var i=jn(n.d,r.d);i&&pn(e,4,t,i),u(n,r,e,t)}else pn(e,0,t,r)}function jn(n,r,e){var t;for(var u in n)if("a1"!==u&&"a0"!==u&&"a3"!==u&&"a4"!==u)if(u in r){var i=n[u],f=r[u];i===f&&"value"!==u&&"checked"!==u||"a0"===e&&$n(i,f)||((t=t||{})[u]=f)}else(t=t||{})[u]=e?"a1"===e?"":"a0"===e||"a3"===e?void 0:{f:n[u].f,o:void 0}:"string"==typeof n[u]?"":null;else{var a=jn(n[u],r[u]||{},u);a&&((t=t||{})[u]=a)}for(var o in r)o in n||((t=t||{})[o]=r[o]);return t}function An(n,r,e,t){var u=n.e,i=r.e,f=u.length,a=i.length;f>a?pn(e,6,t,{v:a,i:f-a}):a>f&&pn(e,7,t,{v:f,e:i});for(var o=a>f?f:a,c=0;o>c;c++){var v=u[c];mn(v,i[c],e,++t),t+=v.b||0}}function _n(n,r,e,t){for(var u=[],i={},f=[],a=n.e,o=r.e,c=a.length,v=o.length,s=0,l=0,d=t;c>s&&v>l;){var b=(N=a[s]).a,h=(E=o[l]).a,g=N.b,$=E.b,p=void 0,m=void 0;if(b!==h){var y=a[s+1],j=o[l+1];if(y){var A=y.a,_=y.b;m=h===A}if(j){var k=j.a,w=j.b;p=b===k}if(p&&m)mn(g,w,u,++d),wn(i,u,b,$,l,f),d+=g.b||0,Nn(i,u,b,_,++d),d+=_.b||0,s+=2,l+=2;else if(p)d++,wn(i,u,h,$,l,f),mn(g,w,u,d),d+=g.b||0,s+=1,l+=2;else if(m)Nn(i,u,b,g,++d),d+=g.b||0,mn(_,$,u,++d),d+=_.b||0,s+=2,l+=1;else{if(!y||A!==k)break;Nn(i,u,b,g,++d),wn(i,u,h,$,l,f),d+=g.b||0,mn(_,w,u,++d),d+=_.b||0,s+=2,l+=2}}else mn(g,$,u,++d),d+=g.b||0,s++,l++}for(;c>s;){var N;Nn(i,u,(N=a[s]).a,g=N.b,++d),d+=g.b||0,s++}for(;v>l;){var E,F=F||[];wn(i,u,(E=o[l]).a,E.b,void 0,F),l++}(u.length>0||f.length>0||F)&&pn(e,8,t,{w:u,x:f,y:F})}var kn="_elmW6BL";function wn(n,r,e,t,u,i){var f=n[e];if(!f)return i.push({r:u,A:f={c:0,z:t,r:u,s:void 0}}),void(n[e]=f);if(1===f.c){i.push({r:u,A:f}),f.c=2;var a=[];return mn(f.z,t,a,f.r),f.r=u,void(f.s.s={w:a,A:f})}wn(n,r,e+kn,t,u,i)}function Nn(n,r,e,t,u){var i=n[e];if(i){if(0===i.c){i.c=2;var f=[];return mn(t,i.z,f,u),void pn(r,9,u,{w:f,A:i})}Nn(n,r,e+kn,t,u)}else{var a=pn(r,9,u,void 0);n[e]={c:1,z:t,r:u,s:a}}}function En(n,r,e,t){return 0===e.length?n:(function n(r,e,t,u){!function r(e,t,u,i,f,a,o){for(var c=u[i],v=c.r;v===f;){var s=c.$;if(1===s)n(e,t.k,c.s,o);else if(8===s)c.t=e,c.u=o,(l=c.s.w).length>0&&r(e,t,l,0,f,a,o);else if(9===s){c.t=e,c.u=o;var l,d=c.s;d&&(d.A.s=e,(l=d.w).length>0&&r(e,t,l,0,f,a,o))}else c.t=e,c.u=o;if(!(c=u[++i])||(v=c.r)>a)return i}var b=t.$;if(4===b){for(var h=t.k;4===h.$;)h=h.k;return r(e,h,u,i,f+1,a,e.elm_event_node_ref)}for(var g=t.e,$=e.childNodes,p=0;g.length>p;p++){var m=1===b?g[p]:g[p].b,y=++f+(m.b||0);if(!(f>v||v>y||(c=u[i=r($[p],m,u,i,f,y,o)])&&(v=c.r)<=a))return i;f=y}return i}(r,e,t,0,0,e.b,u)}(n,r,e,t),Fn(n,e))}function Fn(n,r){for(var e=0;r.length>e;e++){var t=r[e],u=t.t,i=Ln(u,t);u===n&&(n=i)}return n}function Ln(n,r){switch(r.$){case 0:return function(n){var e=n.parentNode,t=vn(r.s,r.u);return t.elm_event_node_ref||(t.elm_event_node_ref=n.elm_event_node_ref),e&&t!==n&&e.replaceChild(t,n),t}(n);case 4:return sn(n,r.u,r.s),n;case 3:return n.replaceData(0,n.length,r.s),n;case 1:return Fn(n,r.s);case 2:return n.elm_event_node_ref?n.elm_event_node_ref.j=r.s:n.elm_event_node_ref={j:r.s,p:r.u},n;case 6:for(var e=r.s,t=0;e.i>t;t++)n.removeChild(n.childNodes[e.v]);return n;case 7:for(var u=(e=r.s).e,i=n.childNodes[t=e.v];u.length>t;t++)n.insertBefore(vn(u[t],r.u),i);return n;case 9:if(!(e=r.s))return n.parentNode.removeChild(n),n;var f=e.A;return void 0!==f.r&&n.parentNode.removeChild(n),f.s=Fn(n,e.w),n;case 8:return function(n,r){var e=r.s,t=function(n,r){if(n){for(var e=Z.createDocumentFragment(),t=0;n.length>t;t++){var u=n[t].A;nn(e,2===u.c?u.s:vn(u.z,r.u))}return e}}(e.y,r);n=Fn(n,e.w);for(var u=e.x,i=0;u.length>i;i++){var f=u[i],a=f.A,o=2===a.c?a.s:vn(a.z,r.u);n.insertBefore(o,n.childNodes[f.r])}return t&&nn(n,t),n}(n,r);case 5:return r.s(n);default:l(10)}}var xn=u(function(n,r,e,t){return function(n,r,e,t,u,i){var a=f(E,n,z(r?r.flags:void 0));Bn(a)||l(2);var o={},c=(a=e(a.a)).a,v=i(d,c),s=function(n,r){var e;for(var t in K){var u=K[t];u.a&&((e=e||{})[t]=u.a(t,r)),n[t]=W(u,r)}return e}(o,d);function d(n,r){v(c=(a=f(t,n,c)).a,r),V(o,a.b,u(c))}return V(o,a.b,u(c)),s?{ports:s}:{}}(r,t,n.as,n.aA,n.ay,function(r,e){var u=n.aC,i=t.node,o=function n(r){if(3===r.nodeType)return rn(r.textContent);if(1!==r.nodeType)return rn("");for(var e=b,t=r.attributes,u=t.length;u--;){var i=t[u];e=h(f(an,i.name,i.value),e)}var o=r.tagName.toLowerCase(),c=b,v=r.childNodes;for(u=v.length;u--;)c=h(n(v[u]),c);return a(en,o,e,c)}(i);return function(n,r){r(n);var e=0;function t(){e=1===e?0:(Tn(t),r(n),1)}return function(u,i){n=u,i?(r(n),2===e&&(e=1)):(0===e&&Tn(t),e=2)}}(e,function(n){var e=u(n),t=function(n,r){var e=[];return mn(n,r,e,0),e}(o,e);i=En(i,o,t,r),o=e})})}),Tn=("undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(n){return setTimeout(n,1e3/60)});"undefined"!=typeof document&&document,"undefined"!=typeof window&&window;var Cn,qn=function(n){return n},On=g,zn=b,Bn=function(n){return!n.$},Rn=u(function(n,r,e,t){return{$:0,a:n,b:r,c:e,d:t}}),Sn=p,Mn=e(function(n,r){return y(r)/y(n)}),In=Sn(f(Mn,2,32)),Dn=[],Pn=o(Rn,0,In,Dn,Dn),Gn=s,Jn=t(function(n,r,e){for(;;){if(!e.b)return r;var t=e.b,u=n,i=f(n,e.a,r);n=u,r=i,e=t}}),Yn=function(n){return a(Jn,On,b,n)},Kn=e(function(n,r){for(;;){var e=f(Gn,32,n),t=e.b,u=f(On,{$:0,a:e.a},r);if(!t.b)return Yn(u);n=t,r=u}}),Wn=e(function(n,r){for(;;){var e=Sn(r/32);if(1===e)return f(Gn,32,n).a;n=f(Kn,n,b),r=e}}),Hn=m,Qn=e(function(n,r){return function n(r,e,t){if("object"!=typeof r)return r===e?0:e>r?-1:1;if(void 0===r.$)return(t=n(r.a,e.a))?t:(t=n(r.b,e.b))?t:n(r.c,e.c);for(;r.b&&e.b&&!(t=n(r.a,e.a));r=r.b,e=e.b);return t||(r.b?1:e.b?-1:0)}(n,r)>0?n:r}),Un=function(n){return n.length},Vn=e(function(n,r){if(r.a){var e=32*r.a,t=Hn(f(Mn,32,e-1)),u=n?Yn(r.d):r.d,i=f(Wn,u,r.a);return o(Rn,Un(r.c)+e,f(Qn,5,t*In),i,r.c)}return o(Rn,Un(r.c),In,Dn,r.c)}),Xn=v,Zn=i(function(n,r,e,t,u){for(;;){if(0>r)return f(Vn,!1,{d:t,a:e/32|0,c:u});var i={$:1,a:a(Xn,32,r,n)};n=n,r-=32,e=e,t=f(On,i,t),u=u}}),nr=e(function(n,r){if(n>0){var e=n%32;return c(Zn,r,n-e-32,n,b,a(Xn,e,n-e,r))}return Pn}),rr=function(n){return{$:0,a:n}},er={$:1},tr=function(n){return{$:1,a:n}},ur=function(n){return{$:0,a:n}},ir=e(function(n,r){return{$:3,a:n,b:r}}),fr=e(function(n,r){return{$:0,a:n,b:r}}),ar=e(function(n,r){return{$:1,a:n,b:r}}),or=function(n){return{$:2,a:n}},cr=U(b),vr=U(b),sr=e(function(n,r){return d(n.$?function(n,r){var e={};for(var t in n)e[t]=n[t];for(var t in r)e[t]=r[t];return e}(r,{F:n.a}):r,cr)}),lr=_,dr=k,br=N,hr=A,gr=function(n){return{$:0,a:n}},$r=f(w,function(n){return"paragraph"===n?{$:11,g:$([f(br,rr,f(lr,"content",f(dr,0,f(lr,"text",hr)))),gr(er)])}:gr(er)},f(lr,"type",hr)),pr=u(function(n,r,e,t){if(t.b){var u=t.a,i=t.b;if(i.b){var c=i.a,v=i.b;if(v.b){var s=v.a,l=v.b;if(l.b){var d=l.b;return f(n,u,f(n,c,f(n,s,f(n,l.a,e>500?a(Jn,n,r,Yn(d)):o(pr,n,r,e+1,d)))))}return f(n,u,f(n,c,f(n,s,r)))}return f(n,u,f(n,c,r))}return f(n,u,r)}return r}),mr=t(function(n,r,e){return o(pr,n,r,0,e)}),yr=t(function(n,r,e){var t=n(r);return t.$?e:f(On,t.a,e)}),jr=f(br,qn,f(br,e(function(n,r){return a(mr,yr(n),b,r)})(qn),{$:3,b:$r})),Ar=e(function(n,r){return a(mr,e(function(r,e){return f(On,n(r),e)}),b,r)}),_r=e(function(n,r){return f(Ar,n,r)}),kr=function(n){return{$:1,a:n}},wr=function(n){switch(n.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},Nr=en("text-editor"),Er=en("div"),Fr=en("p"),Lr=rn,xr=z,Tr=e(function(n,r){return f(fn,n,xr(r))})("className"),Cr=un,qr=e(function(n,r){return f(Cr,n,{$:0,a:r})}),Or=R,zr=Or(0),Br=M,Rr=e(function(n,r){return f(Br,function(r){return Or(n(r))},r)}),Sr=t(function(n,r,e){return f(Br,function(r){return f(Br,function(e){return Or(f(n,r,e))},e)},r)}),Mr=Q,Ir=e(function(n,r){var e=r;return function(n){return S(function(r){r(R(D(n)))})}(f(Br,Mr(n),e))});K.Task={b:zr,c:t(function(n,r){return f(Rr,function(){return 0},(e=f(Ar,Ir(n),r),a(mr,Sr(On),Or(b),e)));var e}),d:t(function(){return Or(0)}),e:e(function(n,r){return f(Rr,n,r)}),f:void 0},Cn={Main:{init:xn({as:function(){return d({F:zn},cr)},ay:function(){return vr},aA:sr,aC:function(n){var r,e=function(n){return f(Fr,b,$([Lr(n)]))};return f(Er,b,$([f(Nr,$([Tr("text-editor"),(r=kr,f(qr,"document-change",f(br,r,f(lr,"detail",jr))))]),b),f(Er,$([Tr("extracted-text")]),f(_r,e,n.F))]))}})(gr(0))(0)}},n.Elm?function n(r,e){for(var t in e)t in r?"init"==t?l(6):n(r[t],e[t]):r[t]=e[t]}(n.Elm,Cn):n.Elm=Cn}(this);
},{}],"R94Y":[function(require,module,exports) {
function t(t){this.content=t}t.prototype={constructor:t,find:function(t){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===t)return n;return-1},get:function(t){var n=this.find(t);return-1==n?void 0:this.content[n+1]},update:function(n,e,r){var o=r&&r!=n?this.remove(r):this,i=o.find(n),c=o.content.slice();return-1==i?c.push(r||n,e):(c[i+1]=e,r&&(c[i]=r)),new t(c)},remove:function(n){var e=this.find(n);if(-1==e)return this;var r=this.content.slice();return r.splice(e,2),new t(r)},addToStart:function(n,e){return new t([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var r=this.remove(n).content.slice();return r.push(n,e),new t(r)},addBefore:function(n,e,r){var o=this.remove(e),i=o.content.slice(),c=o.find(n);return i.splice(-1==c?i.length:c,0,e,r),new t(i)},forEach:function(t){for(var n=0;n<this.content.length;n+=2)t(this.content[n],this.content[n+1])},prepend:function(n){return(n=t.from(n)).size?new t(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=t.from(n)).size?new t(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=t.from(n);for(var r=0;r<n.content.length;r+=2)e=e.remove(n.content[r]);return e},get size(){return this.content.length>>1}},t.from=function(n){if(n instanceof t)return n;var e=[];if(n)for(var r in n)e.push(r,n[r]);return new t(e)},module.exports=t;
},{}],"8m5x":[function(require,module,exports) {
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("orderedmap"));function n(t,e,r){for(var i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:r;var o=t.child(i),s=e.child(i);if(o!=s){if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)r++;return r}if(o.content.size||s.content.size){var h=n(o.content,s.content,r+1);if(null!=h)return h}r+=o.nodeSize}else r+=o.nodeSize}}function r(t,e,n,i){for(var o=t.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:i};var a=t.child(--o),h=e.child(--s),p=a.nodeSize;if(a!=h){if(!a.sameMarkup(h))return{a:n,b:i};if(a.isText&&a.text!=h.text){for(var c=0,f=Math.min(a.text.length,h.text.length);c<f&&a.text[a.text.length-c-1]==h.text[h.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(a.content.size||h.content.size){var u=r(a.content,h.content,n-1,i-1);if(u)return u}n-=p,i-=p}else n-=p,i-=p}}var i=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},o={firstChild:{},lastChild:{},childCount:{}};i.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],h=s+a.nodeSize;if(h>t&&!1!==n(a,r+s,i,o)&&a.content.size){var p=s+1;a.nodesBetween(Math.max(0,t-p),Math.min(a.content.size,e-p),n,r+p)}s=h}},i.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},i.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)},0),i},i.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)},i.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],h=s+a.nodeSize;h>t&&((s<t||h>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),n.push(a),r+=a.nodeSize),s=h}return new i(n,r)},i.prototype.cutByIndex=function(t,e){return t==e?i.empty:0==t&&e==this.content.length?this:new i(this.content.slice(t,e))},i.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)},i.prototype.addToStart=function(t){return new i([t].concat(this.content),this.size+t.nodeSize)},i.prototype.addToEnd=function(t){return new i(this.content.concat(t),this.size+t.nodeSize)},i.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},o.firstChild.get=function(){return this.content.length?this.content[0]:null},o.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},o.childCount.get=function(){return this.content.length},i.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},i.prototype.maybeChild=function(t){return this.content[t]},i.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},i.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),n(this,t,e)},i.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),r(this,t,e,n)},i.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return a(0,t);if(t==this.size)return a(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?a(n+1,i):a(n,r);r=i}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},i.fromJSON=function(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))},i.fromArray=function(t){if(!t.length)return i.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)},i.from=function(t){if(!t)return i.empty;if(t instanceof i)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new i([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(i.prototype,o);var s={index:0,offset:0};function a(t,e){return s.index=t,s.offset=e,s}function h(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!h(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e&&h(t[i],e[i])))return!1;for(var o in e)if(!(o in t))return!1}return!0}i.empty=new i([],0);var p=function(t,e){this.type=t,this.attrs=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&h(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort(function(t,e){return t.type.rank-e.type.rank}),e},p.none=[],c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ReplaceError";var f=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},u={size:{}};function l(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),h=a.index,p=a.offset;if(o==e||s.isText){if(p!=n&&!t.child(h).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=h)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(l(s.content,e-o-1,n-o-1)))}function d(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var h=d(a.content,e-s-1,n);return h&&t.replaceChild(o,a.copy(h))}function y(t,e,n){if(n.openStart>t.depth)throw new c("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new c("Inconsistent open depths");return v(t,e,n,0)}function v(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=v(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=O(n,t);return w(o,S(t,a.start,a.end,e,r))}var h=t.parent,p=h.content;return w(h,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return w(o,C(t,e,r))}function m(t,e){if(!e.type.compatibleContent(t.type))throw new c("Cannot join "+e.type.name+" onto "+t.type.name)}function g(t,e,n){var r=t.node(n);return m(r,e.node(n)),r}function x(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(x(t.nodeAfter,r),o++));for(var a=o;a<s;a++)x(i.child(a),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function w(t,e){if(!t.type.validContent(e))throw new c("Invalid content for node "+t.type.name);return t.copy(e)}function S(t,e,n,r,o){var s=t.depth>o&&g(t,e,o+1),a=r.depth>o&&g(n,r,o+1),h=[];return k(null,t,o,h),s&&a&&e.index(o)==n.index(o)?(m(s,a),x(w(s,S(t,e,n,r,o+1)),h)):(s&&x(w(s,C(t,e,o+1)),h),k(e,n,o,h),a&&x(w(a,C(n,r,o+1)),h)),k(r,null,o,h),new i(h)}function C(t,e,n){var r=[];(k(null,t,n,r),t.depth>n)&&x(w(g(t,e,n+1),C(t,e,n+1)),r);return k(e,null,n,r),new i(r)}function O(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(i.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}u.size.get=function(){return this.content.size-this.openStart-this.openEnd},f.prototype.insertAt=function(t,e){var n=d(this.content,t+this.openStart,e,null);return n&&new f(n,this.openStart,this.openEnd)},f.prototype.removeBetween=function(t,e){return new f(l(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},f.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},f.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},f.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},f.fromJSON=function(t,e){if(!e)return f.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(i.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},f.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new f(t,n,r)},Object.defineProperties(f.prototype,u),f.empty=new f(i.empty,0,0);var M=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},b={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};M.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},b.parent.get=function(){return this.node(this.depth)},b.doc.get=function(){return this.node(0)},M.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},M.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},M.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},M.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},M.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},M.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},M.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},b.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},b.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},b.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},M.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},M.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},M.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},M.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new A(this,t,n)},M.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},M.prototype.max=function(t){return t.pos>this.pos?t:this},M.prototype.min=function(t){return t.pos<this.pos?t:this},M.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},M.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,h=s.offset,p=i-h;if(n.push(o,a,r+h),!p)break;if((o=o.child(a)).isText)break;i=p-1,r+=h+1}return new M(e,n,i)},M.resolveCached=function(t,e){for(var n=0;n<E.length;n++){var r=E[n];if(r.pos==e&&r.doc==t)return r}var i=E[T]=M.resolve(t,e);return T=(T+1)%z,i},Object.defineProperties(M.prototype,b);var E=[],T=0,z=12,A=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},N={start:{},end:{},parent:{},startIndex:{},endIndex:{}};N.start.get=function(){return this.$from.before(this.depth+1)},N.end.get=function(){return this.$to.after(this.depth+1)},N.parent.get=function(){return this.$from.node(this.depth)},N.startIndex.get=function(){return this.$from.index(this.depth)},N.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(A.prototype,N);var I=Object.create(null),R=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||p.none},P={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};P.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},P.childCount.get=function(){return this.content.childCount},R.prototype.child=function(t){return this.content.child(t)},R.prototype.maybeChild=function(t){return this.content.maybeChild(t)},R.prototype.forEach=function(t){this.content.forEach(t)},R.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},R.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},P.textContent.get=function(){return this.textBetween(0,this.content.size,"")},R.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},P.firstChild.get=function(){return this.content.firstChild},P.lastChild.get=function(){return this.content.lastChild},R.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},R.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},R.prototype.hasMarkup=function(t,e,n){return this.type==t&&h(this.attrs,e||t.defaultAttrs||I)&&p.sameSet(this.marks,n||p.none)},R.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},R.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},R.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},R.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return f.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new f(a,r.depth-o,i.depth-o)},R.prototype.replace=function(t,e,n){return y(this.resolve(t),this.resolve(e),n)},R.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(!(e=e.maybeChild(r)))return null;if(i==t||e.isText)return e;t-=i+1}},R.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},R.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},R.prototype.resolve=function(t){return M.resolveCached(this,t)},R.prototype.resolveNoCache=function(t){return M.resolve(this,t)},R.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,function(t){return n.isInSet(t.marks)&&(r=!0),!r}),r},P.isBlock.get=function(){return this.type.isBlock},P.isTextblock.get=function(){return this.type.isTextblock},P.inlineContent.get=function(){return this.type.inlineContent},P.isInline.get=function(){return this.type.isInline},P.isText.get=function(){return this.type.isText},P.isLeaf.get=function(){return this.type.isLeaf},P.isAtom.get=function(){return this.type.isAtom},R.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),B(this.marks,t)},R.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},R.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(t).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var h=r;h<o;h++)if(!this.type.allowsMarks(n.child(h).marks))return!1;return!0},R.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},R.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},R.prototype.defaultContentType=function(t){return this.contentMatchAt(t).defaultType},R.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(t){return t.check()})},R.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(t){return t.toJSON()})),t},R.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=i.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(R.prototype,P);var F=function(t){function e(e,n,r,i){if(t.call(this,e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{},nodeSize:{}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(R);function B(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var j=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},D={inlineContent:{},defaultType:{},edgeCount:{}};j.parse=function(t,e){var n=new J(t,e);if(null==n.next)return j.empty;var r=L(n);n.next&&n.err("Unexpected trailing text");var i=X(G(r));return Y(i,n),i},j.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},j.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},D.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},D.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},j.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},j.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var h=s.matchFragment(t,n);if(h&&(!e||h.validEnd))return i.from(a.map(function(t){return t.createAndFill()}));for(var p=0;p<s.next.length;p+=2){var c=s.next[p],f=s.next[p+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(f)){r.push(f);var u=o(f,a.concat(c));if(u)return u}}}(this,[])},j.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},j.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var h=i.next[a];h.isLeaf||h.hasRequiredAttrs()||h.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:h.contentMatch,type:h,via:r}),e[h.name]=!0)}}},D.edgeCount.get=function(){return this.next.length>>1},j.prototype.edge=function(t){var e=t<<1;if(e>this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},j.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map(function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r}).join("\n")},Object.defineProperties(j.prototype,D),j.empty=new j(!0);var J=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},q={next:{}};function L(t){var e=[];do{e.push(_(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function _(t){var e=[];do{e.push(W(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function W(t){for(var e=H(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=U(t,e)}return e}function $(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function U(t,e){var n=$(t),r=n;return t.eat(",")&&(r="}"!=t.next?$(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function V(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function H(t){if(t.eat("(")){var e=L(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=V(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function G(t){var e=[[]];return i(function t(e,o){if("choice"==e.type)return e.exprs.reduce(function(e,n){return e.concat(t(n,o))},[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],o);if(s==e.exprs.length-1)return a;i(a,o=n())}else{if("star"==e.type){var h=n();return r(o,h),i(t(e.expr,h),h),[r(h)]}if("plus"==e.type){var p=n();return i(t(e.expr,o),p),i(t(e.expr,p),p),[r(p)]}if("opt"==e.type)return[r(o)].concat(t(e.expr,o));if("range"==e.type){for(var c=o,f=0;f<e.min;f++){var u=n();i(t(e.expr,c),u),c=u}if(-1==e.max)i(t(e.expr,c),c);else for(var l=e.min;l<e.max;l++){var d=n();r(c,d),i(t(e.expr,c),d),c=d}return[r(c)]}if("name"==e.type)return[r(o,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach(function(t){return t.to=e})}}function K(t,e){return t-e}function Q(t,e){var n=[];return function e(r){var i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,h=s.to;a||-1!=n.indexOf(h)||e(h)}}(e),n.sort(K)}function X(t){var e=Object.create(null);return function n(r){var i=[];r.forEach(function(e){t[e].forEach(function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];Q(t,r).forEach(function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)})}})});var o=e[r.join(",")]=new j(r.indexOf(t.length-1)>-1);for(var s=0;s<i.length;s+=2){var a=i[s+1].sort(K);o.next.push(i[s],e[a.join(",")]||n(a))}return o}(Q(t,0))}function Y(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var h=i.next[a],p=i.next[a+1];s.push(h.name),!o||h.isText||h.hasRequiredAttrs()||(o=!1),-1==r.indexOf(p)&&r.push(p)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}function Z(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function tt(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function et(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new it(t[n]);return e}q.next.get=function(){return this.tokens[this.pos]},J.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},J.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(J.prototype,q);var nt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=et(n.attrs),this.defaultAttrs=Z(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},rt={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};rt.isInline.get=function(){return!this.isBlock},rt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},rt.isLeaf.get=function(){return this.contentMatch==j.empty},rt.isAtom.get=function(){return this.isLeaf||this.spec.atom},nt.prototype.hasRequiredAttrs=function(t){for(var e in this.attrs)if(this.attrs[e].isRequired&&(!t||!(e in t)))return!0;return!1},nt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},nt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:tt(this.attrs,t)},nt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new R(this,this.computeAttrs(t),i.from(e),p.setFrom(n))},nt.prototype.createChecked=function(t,e,n){if(e=i.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new R(this,this.computeAttrs(t),e,p.setFrom(n))},nt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=i.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(i.empty,!0);return o?new R(this,t,e.append(o),p.setFrom(n)):null},nt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},nt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},nt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},nt.prototype.allowedMarks=function(t){var e;if(null==this.markSet)return t;for(var n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},nt.compile=function(t,e){var n=Object.create(null);t.forEach(function(t,r){return n[t]=new nt(t,e,r)});var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(nt.prototype,rt);var it=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ot={isRequired:{}};ot.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(it.prototype,ot);var st=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=et(r.attrs),this.rank=e,this.excluded=null;var i=Z(this.attrs);this.instance=i&&new p(this,i)};st.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,tt(this.attrs,t))},st.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach(function(t,i){return n[t]=new st(t,r++,e,i)}),n},st.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},st.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},st.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var at=function(t){for(var n in this.spec={},t)this.spec[n]=t[n];this.spec.nodes=e.from(t.nodes),this.spec.marks=e.from(t.marks),this.nodes=nt.compile(this.spec.nodes,this),this.marks=st.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[s]||(r[s]=j.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?ht(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var h in this.marks){var p=this.marks[h],c=p.spec.excludes;p.excluded=null==c?[p]:""==c?[]:ht(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ht(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var h=t.marks[a];("_"==i||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=h)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}at.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof nt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},at.prototype.text=function(t,e){var n=this.nodes.text;return new F(n,n.defaultAttrs,t,p.setFrom(e))},at.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},at.prototype.nodeFromJSON=function(t){return R.fromJSON(this,t)},at.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},at.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var pt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})};pt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new gt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},pt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new gt(this,e,!0);return n.addAll(t,null,e.from,e.to),f.maxOpen(n.finish())},pt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(wt(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(t);if(!1===i)continue;r.attrs=i}return r}}},pt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}},pt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r];if((null==i.priority?50:i.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach(function(t){n(t=Ct(t)),t.mark=e})};for(var i in t.marks)r(i);var o;for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach(function(t){n(t=Ct(t)),t.node=s});return e},pt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new pt(t,pt.schemaRules(t)))};var ct={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ft={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ut={ol:!0,ul:!0},lt=1,dt=2,yt=4;function vt(t){return(t?lt:0)|("full"===t?dt:0)}var mt=function(t,e,n,r,i,o){this.type=t,this.attrs=e,this.solid=r,this.match=i||(o&yt?null:t.contentMatch),this.options=o,this.content=[],this.marks=n,this.activeMarks=p.none};mt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(i.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},mt.prototype.finish=function(t){if(!(this.options&lt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/\s+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=i.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var gt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.pendingMarks=[];var r,i=e.topNode,o=vt(e.preserveWhitespace)|(n?yt:0);r=i?new mt(i.type,i.attrs,p.none,!0,e.topMatch||i.type.contentMatch,o):new mt(n?null:t.schema.topNodeType,null,p.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},xt={top:{},currentPos:{}};function kt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ut.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function wt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function St(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=n.exec(t);)r.push(e[1],e[2].trim());return r}function Ct(t){var e={};for(var n in t)e[n]=t[n];return e}xt.top.get=function(){return this.nodes[this.open]},gt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(St(e)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i])}},gt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(e)){if(n.options&lt)n.options&dt||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/\s+/g," "),/^\s/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/\s$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},gt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();ut.hasOwnProperty(e)&&kt(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ft.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,i=this.top,o=this.needsBlock;ct.hasOwnProperty(e)&&(r=!0,i.type||(this.needsBlock=!0)),this.addAll(t),r&&this.sync(i),this.needsBlock=o}else this.addElementByRule(t,n)},gt.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},gt.prototype.addElementByRule=function(t,e){var n,r,i,o=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs)):n=this.enter(r,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(t){return o.insertNode(t)});else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}return n&&(this.sync(s),this.open--),i&&this.removePendingMark(i),!0},gt.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&ct.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},gt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},gt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));n.content.push(t.mark(r))}},gt.prototype.applyPendingMarks=function(t){for(var e=0;e<this.pendingMarks.length;e++){var n=this.pendingMarks[e];t.type&&!t.type.allowsMarkType(n.type)||n.isInSet(t.activeMarks)||(t.activeMarks=n.addToSet(t.activeMarks),this.pendingMarks.splice(e--,1))}},gt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&(this.applyPendingMarks(this.top),this.enterInner(t,e,!0,n)),r},gt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(t,e);var o=null==r?i.options&~yt:vt(r);i.options&yt&&0==i.content.length&&(o|=yt),this.nodes.push(new mt(t,e,i.activeMarks,n,null,o)),this.open++},gt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},gt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},gt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},gt.prototype.addPendingMark=function(t){this.pendingMarks.push(t)},gt.prototype.removePendingMark=function(t){var e=this.pendingMarks.lastIndexOf(t);if(e>-1)this.pendingMarks.splice(e,1);else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}},xt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},gt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},gt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},gt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},gt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},gt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var h=n[t];if(""==h){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var p=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!p||p.name!=h&&-1==p.groups.indexOf(h))return!1;a--}return!0};return s(n.length-1,this.open)},gt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},Object.defineProperties(gt.prototype,xt);var Ot=function(t,e){this.nodes=t||{},this.marks=e||{}};function Mt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bt(t){return t.document||window.document}Ot.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=bt(e).createDocumentFragment());var i=n,o=null;return t.forEach(function(t){if(o||t.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)i=o.pop(),o.pop();for(;s<t.marks.length;){var h=t.marks[s++],p=r.serializeMark(h,t.isInline,e);p&&(o.push(h,i),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(r.serializeNode(t,e))}),n},Ot.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Ot.renderSpec(bt(e),this.nodes[t.type.name](t)),r=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return r},Ot.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},Ot.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Ot.renderSpec(bt(n),r(t,e))},Ot.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),r=null,i=e[1],o=1;if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i))for(var s in o=2,i)null!=i[s]&&n.setAttribute(s,i[s]);for(var a=o;a<e.length;a++){var h=e[a];if(0===h){if(a<e.length-1||a>o)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var p=Ot.renderSpec(t,h),c=p.dom,f=p.contentDOM;if(n.appendChild(c),f){if(r)throw new RangeError("Multiple content holes");r=f}}return{dom:n,contentDOM:r}},Ot.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ot(this.nodesFromSchema(t),this.marksFromSchema(t)))},Ot.nodesFromSchema=function(t){var e=Mt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Ot.marksFromSchema=function(t){return Mt(t.marks)},exports.Node=R,exports.ResolvedPos=M,exports.NodeRange=A,exports.Fragment=i,exports.Slice=f,exports.ReplaceError=c,exports.Mark=p,exports.Schema=at,exports.NodeType=nt,exports.MarkType=st,exports.ContentMatch=j,exports.DOMParser=pt,exports.DOMSerializer=Ot;
},{"orderedmap":"R94Y"}],"0zfz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e=65535,r=Math.pow(2,16);function n(t,e){return t+e*r}function o(t){return t&e}function i(t){return(t-(t&e))/r}var p=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,r=o(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+i(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,r){for(var o=0,i=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?o:0);if(c>t)break;var h=this.ranges[s+i],f=this.ranges[s+a],l=c+h;if(t<=l){var u=c+o+((h?t==c?-1:t==l?1:e:e)<0?0:f);if(r)return u;var d=n(s/3,t-c);return new p(u,e<0?t!=c:t!=l,d)}o+=f-h}return r?t+o:new p(t+o)},a.prototype.touches=function(t,e){for(var r=0,n=o(e),i=this.inverted?2:1,p=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var c=this.ranges[a+i];if(t<=s+c&&a==3*n)return!0;r+=this.ranges[a+p]-c}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],p=i-(this.inverted?o:0),a=i+(this.inverted?0:o),s=this.ranges[n+e],c=this.ranges[n+r];t(p,p+s,a,a+c),o+=c-s}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var s=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}s.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new s(this.maps,this.mirror,t,e)},s.prototype.copy=function(){return new s(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},s.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},s.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},s.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},s.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},s.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},s.prototype.invert=function(){var t=new s;return t.appendMappingInverted(this),t},s.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},s.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},s.prototype._map=function(t,e,r){for(var n=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],s=o&&o[i];if(null!=s&&a.touches(t,s))t=a.recover(s);else{var c=a.mapResult(t,e);if(null!=c.recover){var h=this.getMirror(i);if(null!=h&&h>i&&h<this.to){if(c.deleted){i=h,t=this.maps[h].recover(c.recover);continue}(o||(o=Object.create(null)))[h]=c.recover}}c.deleted&&(n=!0),t=c.pos}}return r?t:new p(t,n)},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="TransformError";var h=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new s},f={before:{},docChanged:{}};function l(){throw new Error("Override me")}f.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new c(e.failed);return this},h.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},f.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(h.prototype,f);var u=Object.create(null),d=function(){};d.prototype.apply=function(t){return l()},d.prototype.getMap=function(){return a.empty},d.prototype.invert=function(t){return l()},d.prototype.map=function(t){return l()},d.prototype.merge=function(t){return null},d.prototype.toJSON=function(){return l()},d.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=u[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},d.jsonID=function(t,e){if(t in u)throw new RangeError("Duplicate use of step JSON ID "+t);return u[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(e,r,n,o){try{return m.ok(e.replace(r,n,o))}catch(i){if(i instanceof t.ReplaceError)return m.fail(i.message);throw i}};var v=function(e){function r(t,r,n,o){e.call(this),this.from=t,this.to=r,this.slice=n,this.structure=!!o}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){return this.structure&&g(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},r.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},r.prototype.invert=function(t){return new r(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted?null:new r(e.pos,Math.max(e.pos,n.pos),this.slice)},r.prototype.merge=function(e){if(!(e instanceof r)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new r(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new r(this.from,this.to+(e.to-e.from),o,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new r(n.from,n.to,t.Slice.fromJSON(e,n.slice),!!n.structure)},r}(d);d.jsonID("replace",v);var y=function(e){function r(t,r,n,o,i,p,a){e.call(this),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=p,this.structure=!!a}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){if(this.structure&&(g(t,this.from,this.gapFrom)||g(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?m.fromReplace(t,this.from,this.to,r):m.fail("Content does not fit in gap")},r.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},r.prototype.invert=function(t){var e=this.gapTo-this.gapFrom;return new r(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deleted&&n.deleted||o<e.pos||i>n.pos?null:new r(e.pos,n.pos,o,i,this.slice,this.insert,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new r(n.from,n.to,n.gapFrom,n.gapTo,t.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},r}(d);function g(t,e,r){for(var n=t.resolve(e),o=r-e,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var p=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!p||p.isLeaf)return!0;p=p.firstChild,o--}return!1}function S(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function w(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!S(n,o,i))break}}function k(t,e,r,n){void 0===n&&(n=t);var o=M(t,e),i=o&&C(n,e);return i?o.map(x).concat({type:e,attrs:r}).concat(i.map(x)):null}function x(t){return{type:t,attrs:null}}function M(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;var p=i.length?i[0]:e;return r.canReplaceWith(n,o,p)?i:null}function C(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.child(n),p=e.contentMatch.findWrapping(i.type);if(!p)return null;for(var a=(p.length?p[p.length-1]:e).contentMatch,s=n;a&&s<o;s++)a=a.matchType(r.child(s).type);return a&&a.validEnd?p:null}function b(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}function R(t,e,r,n){void 0===r&&(r=1);var o=t.resolve(e),i=o.depth-r,p=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!p.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,s=r-2;a>i;a--,s--){var c=o.node(a),h=o.index(a);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(h,c.childCount),l=n&&n[s]||c;if(l!=c&&(f=f.replaceChild(0,l.type.create(l.attrs))),!c.canReplace(h+1,c.childCount)||!l.type.validContent(f))return!1}var u=o.indexAfter(i),d=n&&n[0];return o.node(i).canReplaceWith(u,u,d?d.type:o.node(i+1).type)}function E(t,e){var r=t.resolve(e),n=r.index();return T(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function T(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function F(t,e,r){void 0===r&&(r=-1);for(var n=t.resolve(e),o=n.depth;;o--){var i=void 0,p=void 0;if(o==n.depth?(i=n.nodeBefore,p=n.nodeAfter):r>0?(i=n.node(o+1),p=n.node(o).maybeChild(n.index(o)+1)):(i=n.node(o).maybeChild(n.index(o)-1),p=n.node(o+1)),i&&!i.isTextblock&&T(i,p))return e;if(0==o)break;e=r<0?n.before(o):n.after(o)}}function O(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var p=n.depth-1;p>=0;p--){var a=n.indexAfter(p);if(n.node(p).canReplaceWith(a,a,r))return n.after(p+1);if(a<n.node(p).childCount)return null}}function A(t,e,r){var n=t.resolve(e);if(!r.content.size)return e;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var p=1;p<=(0==r.openStart&&r.size?2:1);p++)for(var a=n.depth;a>=0;a--){var s=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(s>0?1:0);if(1==p?n.node(a).canReplace(c,c,o):n.node(a).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==s?n.pos:s<0?n.before(a+1):n.after(a+1)}return null}function I(e,r,n){for(var o=[],i=0;i<e.childCount;i++){var p=e.child(i);p.content.size&&(p=p.copy(I(p.content,r,p))),p.isInline&&(p=r(p,n,i)),o.push(p)}return t.Fragment.fromArray(o)}d.jsonID("replaceAround",y),h.prototype.lift=function(e,r){for(var n=e.$from,o=e.$to,i=e.depth,p=n.before(i+1),a=o.after(i+1),s=p,c=a,h=t.Fragment.empty,f=0,l=i,u=!1;l>r;l--)u||n.index(l)>0?(u=!0,h=t.Fragment.from(n.node(l).copy(h)),f++):s--;for(var d=t.Fragment.empty,m=0,v=i,g=!1;v>r;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=t.Fragment.from(o.node(v).copy(d)),m++):c++;return this.step(new y(s,c,p,a,new t.Slice(h.append(d),f,m),h.size-f,!0))},h.prototype.wrap=function(e,r){for(var n=t.Fragment.empty,o=r.length-1;o>=0;o--)n=t.Fragment.from(r[o].type.create(r[o].attrs,n));var i=e.start,p=e.end;return this.step(new y(i,p,i,p,new t.Slice(n,0,0),r.length,!0))},h.prototype.setBlockType=function(e,r,n,o){var i=this;if(void 0===r&&(r=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var p=this.steps.length;return this.doc.nodesBetween(e,r,function(e,r){if(e.isTextblock&&!e.hasMarkup(n,o)&&b(i.doc,i.mapping.slice(p).map(r),n)){i.clearIncompatible(i.mapping.slice(p).map(r,1),n);var a=i.mapping.slice(p),s=a.map(r,1),c=a.map(r+e.nodeSize,1);return i.step(new y(s,c,s+1,c-1,new t.Slice(t.Fragment.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}}),this},h.prototype.setNodeMarkup=function(e,r,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);var p=r.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,p);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);return this.step(new y(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new t.Slice(t.Fragment.from(p),0,0),1,!0))},h.prototype.split=function(e,r,n){void 0===r&&(r=1);for(var o=this.doc.resolve(e),i=t.Fragment.empty,p=t.Fragment.empty,a=o.depth,s=o.depth-r,c=r-1;a>s;a--,c--){i=t.Fragment.from(o.node(a).copy(i));var h=n&&n[c];p=t.Fragment.from(h?h.type.create(h.attrs,p):o.node(a).copy(p))}return this.step(new v(e,e,new t.Slice(i.append(p),r,r,!0)))},h.prototype.join=function(e,r){void 0===r&&(r=1);var n=new v(e-r,e+r,t.Slice.empty,!0);return this.step(n)};var N=function(e){function r(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(e){var r=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),p=new t.Slice(I(n.content,function(t,e){return e.type.allowsMarkType(r.mark.type)?t.mark(r.mark.addToSet(t.marks)):t},i),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,p)},r.prototype.invert=function(){return new z(this.from,this.to,this.mark)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new r(e.pos,n.pos,this.mark)},r.prototype.merge=function(t){if(t instanceof r&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new r(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},r.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new r(e.from,e.to,t.markFromJSON(e.mark))},r}(d);d.jsonID("addMark",N);var z=function(e){function r(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(e){var r=this,n=e.slice(this.from,this.to),o=new t.Slice(I(n.content,function(t){return t.mark(r.mark.removeFromSet(t.marks))}),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,o)},r.prototype.invert=function(){return new N(this.from,this.to,this.mark)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new r(e.pos,n.pos,this.mark)},r.prototype.merge=function(t){if(t instanceof r&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new r(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},r.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new r(e.from,e.to,t.markFromJSON(e.mark))},r}(d);function _(e,r,n,o){if(void 0===n&&(n=r),void 0===o&&(o=t.Slice.empty),r==n&&!o.size)return null;var i=e.resolve(r),p=e.resolve(n);if($(i,p,o))return new v(r,n,o);var a=B(i,H(i,o)),s=P(i,p,a);if(!s)return null;if(a.size!=s.size&&L(i,p,a)){for(var c=p.depth,h=p.after(c);c>1&&h==p.end(--c);)++h;var f=P(i,e.resolve(h),a);if(f)return new y(r,h,n,p.end(),f,a.size)}return s.size||r!=n?new v(r,n,s):null}function J(e,r,n,o){var i=t.Fragment.empty,p=0,a=n[r];if(e.depth>r){var s=J(e,r+1,n,o||a);p=s.openEnd+1,i=t.Fragment.from(e.node(r+1).copy(s.content))}return a&&(i=i.append(a.content),p=a.openEnd),o&&(i=i.append(e.node(r).contentMatchAt(e.indexAfter(r)).fillBefore(t.Fragment.empty,!0)),p=0),{content:i,openEnd:p}}function B(e,r){var n=J(e,0,r,!1),o=n.content,i=n.openEnd;return new t.Slice(o,e.depth,i||0)}function j(t,e,r,n,o,i,p){var a,s=t.childCount,c=s-(p>0?1:0),h=i<0?e:r.node(o);a=i<0?h.contentMatchAt(c):1==s&&p>0?h.contentMatchAt(i?r.index(o):r.indexAfter(o)):h.contentMatchAt(r.indexAfter(o)).matchFragment(t,s>0&&i?1:0,c);var f=n.node(o);if(p>0&&o<n.depth){var l=f.content.cutByIndex(n.indexAfter(o)).addToStart(t.lastChild),u=a.fillBefore(l,!0);if(u&&u.size&&i>0&&1==s&&(u=null),u){var d=j(t.lastChild.content,t.lastChild,r,n,o+1,1==s?i-1:-1,p-1);if(d){var m=t.lastChild.copy(d);return u.size?t.cutByIndex(0,s-1).append(u).addToEnd(m):t.replaceChild(s-1,m)}}}p>0&&(a=a.matchType((1==s&&i>0?r.node(o+1):t.lastChild).type));var v=n.index(o);if(v==f.childCount&&!f.type.compatibleContent(e.type))return null;for(var y=a.fillBefore(f.content,!0,v),g=v;y&&g<f.content.childCount;g++)h.type.allowsMarks(f.content.child(g).marks)||(y=null);if(!y)return null;if(p>0){var S=W(t.lastChild,p-1,r,o+1,1==s?i-1:-1);t=t.replaceChild(s-1,S)}return t=t.append(y),n.depth>o&&(t=t.addToEnd(D(n,o+1))),t}function W(e,r,n,o,i){var p,a=e.content,s=a.childCount;if(p=i>=0?n.node(o).contentMatchAt(n.indexAfter(o)).matchFragment(a,i>0?1:0,s):e.contentMatchAt(s),r>0){var c=W(a.lastChild,r-1,n,o+1,1==s?i-1:-1);a=a.replaceChild(s-1,c)}return e.copy(a.append(p.fillBefore(t.Fragment.empty,!0)))}function D(t,e){var r=t.node(e),n=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(e));return t.depth>e&&(n=n.addToEnd(D(t,e+1))),r.copy(n)}function q(e,r,n){for(;r>0&&n>0&&1==e.childCount;)e=e.firstChild.content,r--,n--;return new t.Slice(e,r,n)}function P(t,e,r){var n=j(r.content,t.node(0),t,e,0,r.openStart,r.openEnd);return n?q(n,r.openStart,e.depth):null}function $(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}function L(t,e,r){if(!e.parent.isTextblock)return!1;var n,o=r.openEnd?G(r.content,r.openEnd):t.node(t.depth-(r.openStart-r.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;return r.openEnd?n=o.contentMatchAt(o.childCount):(n=o.contentMatchAt(o.childCount),r.size&&(n=n.matchFragment(r.content,r.openStart?1:0))),(n=n.matchFragment(e.parent.content,e.index()))&&n.validEnd}function G(t,e){for(var r=1;r<e;r++)t=t.lastChild.content;return t.lastChild}function H(t,e){for(var r=new K(t),n=1;e.size&&n<=3;n++)e=r.placeSlice(e.content,e.openStart,e.openEnd,n);for(;r.open.length;)r.closeNode();return r.placed}d.jsonID("removeMark",z),h.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],p=null,a=null;return this.doc.nodesBetween(t,e,function(n,s,c){if(n.isInline){var h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){for(var f=Math.max(s,t),l=Math.min(s+n.nodeSize,e),u=r.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(u)||(p&&p.to==f&&p.mark.eq(h[d])?p.to=l:o.push(p=new z(f,l,h[d])));a&&a.to==f?a.to=l:i.push(a=new N(f,l,r))}}}),o.forEach(function(t){return n.step(t)}),i.forEach(function(t){return n.step(t)}),this},h.prototype.removeMark=function(e,r,n){var o=this;void 0===n&&(n=null);var i=[],p=0;return this.doc.nodesBetween(e,r,function(o,a){if(o.isInline){p++;var s=null;if(n instanceof t.MarkType){var c=n.isInSet(o.marks);c&&(s=[c])}else n?n.isInSet(o.marks)&&(s=[n]):s=o.marks;if(s&&s.length)for(var h=Math.min(a+o.nodeSize,r),f=0;f<s.length;f++){for(var l=s[f],u=void 0,d=0;d<i.length;d++){var m=i[d];m.step==p-1&&l.eq(i[d].style)&&(u=m)}u?(u.to=h,u.step=p):i.push({style:l,from:Math.max(a,e),to:h,step:p})}}}),i.forEach(function(t){return o.step(new z(t.from,t.to,t.style))}),this},h.prototype.clearIncompatible=function(e,r,n){void 0===n&&(n=r.contentMatch);for(var o=this.doc.nodeAt(e),i=[],p=e+1,a=0;a<o.childCount;a++){var s=o.child(a),c=p+s.nodeSize,h=n.matchType(s.type,s.attrs);if(h){n=h;for(var f=0;f<s.marks.length;f++)r.allowsMarkType(s.marks[f].type)||this.step(new z(p,c,s.marks[f]))}else i.push(new v(p,c,t.Slice.empty));p=c}if(!n.validEnd){var l=n.fillBefore(t.Fragment.empty,!0);this.replace(p,p,new t.Slice(l,0,0))}for(var u=i.length-1;u>=0;u--)this.step(i[u]);return this},h.prototype.replace=function(e,r,n){void 0===r&&(r=e),void 0===n&&(n=t.Slice.empty);var o=_(this.doc,e,r,n);return o&&this.step(o),this},h.prototype.replaceWith=function(e,r,n){return this.replace(e,r,new t.Slice(t.Fragment.from(n),0,0))},h.prototype.delete=function(e,r){return this.replace(e,r,t.Slice.empty)},h.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var K=function(e){this.open=[];for(var r=0;r<=e.depth;r++){var n=e.node(r),o=n.contentMatchAt(e.indexAfter(r));this.open.push({parent:n,match:o,content:t.Fragment.empty,wrapper:!1,openEnd:0,depth:r})}this.placed=[]};function Q(t,e,r){var n=t.content;if(e>1){var o=Q(t.firstChild,e-1,1==t.childCount?r-1:0);n=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(n,0==r);return t.copy(i.append(n))}function U(e,r){var n=e.content;if(r>1){var o=U(e.lastChild,r-1);n=e.content.replaceChild(e.childCount-1,o)}var i=e.contentMatchAt(e.childCount).fillBefore(t.Fragment.empty,!0);return e.copy(n.append(i))}function V(t,e){return e?t.replaceChild(t.childCount-1,U(t.lastChild,e)):t}function X(t,e,r,n,o){if(e<r){var i=t.firstChild;t=t.replaceChild(0,i.copy(X(i.content,e+1,r,n,i)))}return e>n&&(t=o.contentMatchAt(0).fillBefore(t,!0).append(t)),t}function Y(t,e){for(var r=[],n=Math.min(t.depth,e.depth);n>=0;n--){var o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;o==e.start(n)&&r.push(n)}return r}K.prototype.placeSlice=function(e,r,n,o,i){if(r>0){var p=e.firstChild,a=this.placeSlice(p.content,Math.max(0,r-1),n&&1==e.childCount?n-1:0,o,p);a.content!=p.content&&(a.content.size?(e=e.replaceChild(0,p.copy(a.content)),r=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),r=0))}var s=this.placeContent(e,r,n,o,i);if(o>2&&s.size&&0==r){for(var c=0;c<s.content.childCount;c++){var h=s.content.child(c);this.placeContent(h.content,0,n&&c==s.content.childCount.length-1?n-1:0,o,h)}s=t.Fragment.empty}return s},K.prototype.placeContent=function(e,r,n,o,i){for(var p=0;p<e.childCount;p++){for(var a=e.child(p),s=!1,c=p==e.childCount-1,h=this.open.length-1;h>=0;h--){var f=this.open[h],l=void 0;if(o>1&&(l=f.match.findWrapping(a.type))&&(!i||!l.length||l[l.length-1]!=i.type)){for(;this.open.length-1>h;)this.closeNode();for(var u=0;u<l.length;u++)f.match=f.match.matchType(l[u]),h++,f={parent:l[u].create(),match:l[u].contentMatch,content:t.Fragment.empty,wrapper:!0,openEnd:0,depth:h+u},this.open.push(f)}var d=f.match.matchType(a.type);if(!d){var m=f.match.fillBefore(t.Fragment.from(a));if(!m){if(i&&f.match.matchType(i.type))break;continue}for(var v=0;v<m.childCount;v++){var y=m.child(v);this.addNode(f,y,0),d=f.match.matchFragment(y)}}for(;this.open.length-1>h;)this.closeNode();a=a.mark(f.parent.type.allowedMarks(a.marks)),r&&(a=Q(a,r,c?n:0),r=0),this.addNode(f,a,c?n:0),f.match=d,c&&(n=0),s=!0;break}if(!s)break}return this.open.length>1&&(p>0&&p==e.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new t.Slice(e.cutByIndex(p),r,n)},K.prototype.addNode=function(t,e,r){t.content=V(t.content,t.openEnd).addToEnd(e),t.openEnd=r},K.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},h.prototype.replaceRange=function(e,r,n){if(!n.size)return this.deleteRange(e,r);var o=this.doc.resolve(e),i=this.doc.resolve(r);if($(o,i,n))return this.step(new v(e,r,n));var p=Y(o,this.doc.resolve(r));0==p[p.length-1]&&p.pop();var a=-(o.depth+1);p.unshift(a);for(var s=o.depth,c=o.pos-1;s>0;s--,c--){var h=o.node(s).type.spec;if(h.defining||h.isolating)break;p.indexOf(s)>-1?a=s:o.before(s)==c&&p.splice(1,0,-s)}for(var f=p.indexOf(a),l=[],u=n.openStart,d=n.content,m=0;;m++){var y=d.firstChild;if(l.push(y),m==n.openStart)break;d=y.content}u>0&&l[u-1].type.spec.defining&&o.node(f).type!=l[u-1].type?u-=1:u>=2&&l[u-1].isTextblock&&l[u-2].type.spec.defining&&o.node(f).type!=l[u-2].type&&(u-=2);for(var g=n.openStart;g>=0;g--){var S=(g+u+1)%(n.openStart+1),w=l[S];if(w)for(var k=0;k<p.length;k++){var x=p[(k+f)%p.length],M=!0;x<0&&(M=!1,x=-x);var C=o.node(x-1),b=o.index(x-1);if(C.canReplaceWith(b,b,w.type,w.marks))return this.replace(o.before(x),M?i.after(x):r,new t.Slice(X(n.content,0,n.openStart,S),S,n.openEnd))}}return this.replace(e,r,n)},h.prototype.replaceRangeWith=function(e,r,n){if(!n.isInline&&e==r&&this.doc.resolve(e).parent.content.size){var o=O(this.doc,e,n.type);null!=o&&(e=r=o)}return this.replaceRange(e,r,new t.Slice(t.Fragment.from(n),0,0))},h.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=Y(r,n),i=0;i<o.length;i++){var p=o[i],a=i==o.length-1;if(a&&0==p||r.node(p).type.contentMatch.validEnd)return this.delete(r.start(p),n.end(p));if(p>0&&(a||r.node(p-1).canReplace(r.index(p-1),n.indexAfter(p-1))))return this.delete(r.before(p),n.after(p))}for(var s=1;s<=r.depth;s++)if(t-r.start(s)==r.depth-s&&e>r.end(s))return this.delete(r.before(s),e);return this.delete(t,e)},exports.Transform=h,exports.TransformError=c,exports.Step=d,exports.StepResult=m,exports.joinPoint=F,exports.canJoin=E,exports.canSplit=R,exports.insertPoint=O,exports.dropPoint=A,exports.liftTarget=w,exports.findWrapping=k,exports.StepMap=a,exports.MapResult=p,exports.Mapping=s,exports.AddMarkStep=N,exports.RemoveMarkStep=z,exports.ReplaceStep=v,exports.ReplaceAroundStep=y,exports.replaceStep=_;
},{"prosemirror-model":"8m5x"}],"+fmv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e=require("prosemirror-transform"),n=Object.create(null),r=function(t,e,n){this.ranges=n||[new i(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},o={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};o.anchor.get=function(){return this.$anchor.pos},o.head.get=function(){return this.$head.pos},o.from.get=function(){return this.$from.pos},o.to.get=function(){return this.$to.pos},o.$from.get=function(){return this.ranges[0].$from},o.$to.get=function(){return this.ranges[0].$to},o.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},r.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},r.prototype.replace=function(e,n){void 0===n&&(n=t.Slice.empty);for(var r=n.content.lastChild,o=null,i=0;i<n.openEnd;i++)o=r,r=r.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var p=a[c],u=p.$from,h=p.$to,l=e.mapping.slice(s);e.replaceRange(l.map(u.pos),l.map(h.pos),c?t.Slice.empty:n),0==c&&f(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}},r.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),p=c.map(s.pos),u=c.map(a.pos);o?t.deleteRange(p,u):(t.replaceRangeWith(p,u,e),f(t,n,e.isInline?-1:1))}},r.findFrom=function(t,e,n){var r=t.parent.inlineContent?new s(t):l(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?l(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):l(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},r.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new u(t.node(0))},r.atStart=function(t){return l(t,t,0,0,1)||new u(t)},r.atEnd=function(t){return l(t,t,t.content.size,t.childCount,-1)||new u(t)},r.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=n[e.type];if(!r)throw new RangeError("No selection type "+e.type+" defined");return r.fromJSON(t,e)},r.jsonID=function(t,e){if(t in n)throw new RangeError("Duplicate use of selection JSON ID "+t);return n[t]=e,e.prototype.jsonID=t,e},r.prototype.getBookmark=function(){return s.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(r.prototype,o),r.prototype.visible=!0;var i=function(t,e){this.$from=t,this.$to=e},s=function(e){function n(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={$cursor:{}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},n.prototype.map=function(t,r){var o=t.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=t.resolve(r.map(this.anchor));return new n(i.parent.inlineContent?i:o,o)},n.prototype.replace=function(n,r){if(void 0===r&&(r=t.Slice.empty),e.prototype.replace.call(this,n,r),r==t.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&n.ensureMarks(o)}},n.prototype.eq=function(t){return t instanceof n&&t.anchor==this.anchor&&t.head==this.head},n.prototype.getBookmark=function(){return new a(this.anchor,this.head)},n.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},n.fromJSON=function(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(t.resolve(e.anchor),t.resolve(e.head))},n.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},n.between=function(t,r,o){var i=t.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!s)return e.near(r,o);r=s.$head}return t.parent.inlineContent||(0==i?t=r:(t=(e.findFrom(t,-o,!0)||e.findFrom(t,o,!0)).$anchor).pos<r.pos!=i<0&&(t=r)),new n(t,r)},Object.defineProperties(n.prototype,r),n}(r);r.jsonID("text",s);var a=function(t,e){this.anchor=t,this.head=e};a.prototype.map=function(t){return new a(t.map(this.anchor),t.map(this.head))},a.prototype.resolve=function(t){return s.between(t.resolve(this.anchor),t.resolve(this.head))};var c=function(e){function n(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.map=function(t,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=t.resolve(s);return i?e.near(a):new n(a)},n.prototype.content=function(){return new t.Slice(t.Fragment.from(this.node),0,0)},n.prototype.eq=function(t){return t instanceof n&&t.anchor==this.anchor},n.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},n.prototype.getBookmark=function(){return new p(this.anchor)},n.fromJSON=function(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(t.resolve(e.anchor))},n.create=function(t,e){return new this(t.resolve(e))},n.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},n}(r);c.prototype.visible=!1,r.jsonID("node",c);var p=function(t){this.anchor=t};p.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new a(r,r):new p(r)},p.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&c.isSelectable(n)?new c(e):r.near(e)};var u=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return h},e}(r);r.jsonID("all",u);var h={map:function(){return this},resolve:function(t){return new u(t)}};function l(t,e,n,r,o,i){if(e.inlineContent)return s.create(t,n);for(var a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var p=e.child(a);if(p.isAtom){if(!i&&c.isSelectable(p))return c.create(t,n-(o<0?p.nodeSize:0))}else{var u=l(t,p,n+o,o<0?p.childCount:0,o,i);if(u)return u}n+=p.nodeSize*o}}function f(t,n,o){var i=t.steps.length-1;if(!(i<n)){var s,a=t.steps[i];if(a instanceof e.ReplaceStep||a instanceof e.ReplaceAroundStep)t.mapping.maps[i].forEach(function(t,e,n,r){null==s&&(s=r)}),t.setSelection(r.near(t.doc.resolve(s),o))}}var d=1,m=2,y=4,g=function(e){function n(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var o={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return o.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},n.prototype.setSelection=function(t){return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|d)&~m,this.storedMarks=null,this},o.selectionSet.get=function(){return(this.updated&d)>0},n.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=m,this},n.prototype.ensureMarks=function(e){return t.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},n.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},n.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},o.storedMarksSet.get=function(){return(this.updated&m)>0},n.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=this.updated&~m,this.storedMarks=null},n.prototype.setTime=function(t){return this.time=t,this},n.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},n.prototype.replaceSelectionWith=function(e,n){var r=this.selection;return!1!==n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||t.Mark.none))),r.replaceWith(this,e),this},n.prototype.deleteSelection=function(){return this.selection.replace(this),this},n.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var o=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var s=this.doc.resolve(e);i=n==e?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,o.text(t,i)),this.selection.empty||this.setSelection(r.near(this.selection.$to)),this},n.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},n.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},o.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},n.prototype.scrollIntoView=function(){return this.updated|=y,this},o.scrolledIntoView.get=function(){return(this.updated&y)>0},Object.defineProperties(n.prototype,o),n}(e.Transform);function v(t,e){return e&&t?t.bind(e):t}var S=function(t,e,n){this.name=t,this.init=v(e.init,n),this.apply=v(e.apply,n)},k=[new S("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new S("selection",{init:function(t,e){return t.selection||r.atStart(e.doc)},apply:function(t){return t.selection}}),new S("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new S("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],w=function(t,e){var n=this;this.schema=t,this.fields=k.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach(function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new S(t.key,t.spec.state,t))})},O=function(t){this.config=t},$={schema:{},plugins:{},tr:{}};$.schema.get=function(){return this.config.schema},$.plugins.get=function(){return this.config.plugins},O.prototype.apply=function(t){return this.applyTransaction(t).state},O.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},O.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,p=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(p&&n.filterTransaction(p,i)){if(p.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:e.length}:{state:this,n:0})}e.push(p),n=n.applyInner(p),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},O.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new O(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<M.length;i++)M[i](this,t,e);return e},$.tr.get=function(){return new g(this)},O.create=function(t){for(var e=new w(t.schema||t.doc.type.schema,t.plugins),n=new O(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},O.prototype.reconfigure=function(t){for(var e=new w(t.schema||this.schema,t.plugins),n=e.fields,r=new O(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},O.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(function(t){return t.toJSON()})),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},O.fromJSON=function(e,n,o){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new w(e.schema,e.plugins),s=new O(i);return i.fields.forEach(function(i){if("doc"==i.name)s.doc=t.Node.fromJSON(e.schema,n.doc);else if("selection"==i.name)s.selection=r.fromJSON(s.doc,n.selection);else if("storedMarks"==i.name)n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(o)for(var a in o){var c=o[a],p=c.spec.state;if(c.key==i.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(n,a))return void(s[i.name]=p.fromJSON.call(c,e,n[a],s))}s[i.name]=i.init(e,s)}}),s},O.addApplyListener=function(t){M.push(t)},O.removeApplyListener=function(t){var e=M.indexOf(t);e>-1&&M.splice(e,1)},Object.defineProperties(O.prototype,$);var M=[];function b(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=b(o,e,{})),n[r]=o}return n}var N=function(t){this.props={},t.props&&b(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:x("plugin")};N.prototype.getState=function(t){return t[this.key]};var J=Object.create(null);function x(t){return t in J?t+"$"+ ++J[t]:(J[t]=0,t+"$")}var T=function(t){void 0===t&&(t="key"),this.key=x(t)};T.prototype.get=function(t){return t.config.pluginsByKey[this.key]},T.prototype.getState=function(t){return t[this.key]},exports.Selection=r,exports.SelectionRange=i,exports.TextSelection=s,exports.NodeSelection=c,exports.AllSelection=u,exports.Transaction=g,exports.EditorState=O,exports.Plugin=N,exports.PluginKey=T;
},{"prosemirror-model":"8m5x","prosemirror-transform":"0zfz"}],"Lkgx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-model"),t=require("prosemirror-state"),o=require("prosemirror-transform"),n={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r=/Edge\/(\d+)/.exec(navigator.userAgent),i=/MSIE \d/.test(navigator.userAgent),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);n.mac=/Mac/.test(navigator.platform);var a=n.ie=!!(i||s||r);n.ie_version=i?document.documentMode||6:s?+s[1]:r?+r[1]:null,n.gecko=!a&&/gecko\/(\d+)/i.test(navigator.userAgent),n.gecko_version=n.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var c=!a&&/Chrome\/(\d+)/.exec(navigator.userAgent);n.chrome=!!c,n.chrome_version=c&&+c[1],n.ios=!a&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n.android=/Android \d/.test(navigator.userAgent),n.webkit=!a&&"WebkitAppearance"in document.documentElement.style,n.safari=/Apple Computer/.test(navigator.vendor),n.webkit_version=n.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var l=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,o){var n=document.createRange();return n.setEnd(e,null==o?e.nodeValue.length:o),n.setStart(e,t||0),n},h=function(e,t,o,n){return o&&(u(e,t,o,n,-1)||u(e,t,o,n,1))},p=/^(img|br|input|textarea|hr)$/i;function u(e,t,o,n,r){for(;;){if(e==o&&t==n)return!0;if(t==(r<0?0:m(e))||3==e.nodeType&&"\ufeff"==e.nodeValue){var i=e.parentNode;if(1!=i.nodeType||v(e)||p.test(e.nodeName)||"false"==e.contentEditable)return!1;t=l(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(r<0?-1:0)],t=r<0?m(e):0}}}function m(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function v(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}var g=function(e){var t=e.isCollapsed;return t&&n.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function y(e,t){var o=document.createEvent("Event");return o.initEvent("keydown",!0,!0),o.keyCode=e,o.key=o.code=t,o}function b(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function w(e,t){return"number"==typeof e?e:e[t]}function D(e,t,o){for(var n=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=i.defaultView,a=o||e.dom;a;a=d(a))if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,l=c?b(s):a.getBoundingClientRect(),f=0,h=0;if(t.top<l.top+w(n,"top")?h=-(l.top-t.top+w(r,"top")):t.bottom>l.bottom-w(n,"bottom")&&(h=t.bottom-l.bottom+w(r,"bottom")),t.left<l.left+w(n,"left")?f=-(l.left-t.left+w(r,"left")):t.right>l.right-w(n,"right")&&(f=t.right-l.right+w(r,"right")),(f||h)&&(c?s.scrollBy(f,h):(h&&(a.scrollTop+=h),f&&(a.scrollLeft+=f))),c)break}}function S(e){for(var t,o,n=e.dom.getBoundingClientRect(),r=Math.max(0,n.top),i=e.dom.ownerDocument,s=(n.left+n.right)/2,a=r+1;a<Math.min(innerHeight,n.bottom);a+=5){var c=e.root.elementFromPoint(s,a);if(c!=e.dom&&e.dom.contains(c)){var l=c.getBoundingClientRect();if(l.top>=r-20){t=c,o=l.top;break}}}for(var f=[],h=e.dom;h&&(f.push({dom:h,top:h.scrollTop,left:h.scrollLeft}),h!=i.body);h=d(h));return{refDOM:t,refTop:o,stack:f}}function O(e){for(var t=e.refDOM,o=e.refTop,n=e.stack,r=t?t.getBoundingClientRect().top:0,i=0==r?0:r-o,s=0;s<n.length;s++){var a=n[s],c=a.dom,l=a.top,d=a.left;c.scrollTop!=l+i&&(c.scrollTop=l+i),c.scrollLeft!=d&&(c.scrollLeft=d)}}function x(e,t){for(var o,n,r=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var d=void 0;if(1==c.nodeType)d=c.getClientRects();else{if(3!=c.nodeType)continue;d=f(c).getClientRects()}for(var h=0;h<d.length;h++){var p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var u=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(u<r){o=c,r=u,n=u&&3==o.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&u&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!o&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return o&&3==o.nodeType?C(o,n):!o||r&&1==o.nodeType?{node:e,offset:i}:x(o,n)}function C(e,t){for(var o=e.nodeValue.length,n=document.createRange(),r=0;r<o;r++){n.setEnd(e,r+1),n.setStart(e,r);var i=V(n,1);if(i.top!=i.bottom&&N(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function N(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function M(e,t){var o=e.parentNode;return o&&/^li$/i.test(o.nodeName)&&t.left<e.getBoundingClientRect().left?o:e}function T(e,t,o){var n=x(t,o),r=n.node,i=n.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&o.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function k(e,t,o,n){for(var r=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)r=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;r=s.posAfter}}i=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,o)}function P(e,t,o){var n=e.childNodes.length;if(n&&o.top<o.bottom)for(var r=Math.max(0,Math.floor(n*(t.top-o.top)/(o.bottom-o.top))-2),i=r;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(N(t,l))return P(s,t,l)}if((i=(i+1)%n)==r)break}return e}function A(e,t){var o,n,r=e.root;if(r.caretPositionFromPoint){var i,s=r.caretPositionFromPoint(t.left,t.top);if(s)o=(i=s).offsetNode,n=i.offset}if(!o&&r.caretRangeFromPoint){var a,c=r.caretRangeFromPoint(t.left,t.top);if(c)o=(a=c).startContainer,n=a.startOffset}var l,d=r.elementFromPoint(t.left,t.top+1);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){var f=e.dom.getBoundingClientRect();if(!N(t,f))return null;if(!(d=P(e.dom,t,f)))return null}d=M(d,t),o&&(o==e.dom&&n==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=n&&1==o.nodeType&&"BR"==o.childNodes[n-1].nodeName||(l=k(e,o,n,t))),null==l&&(l=T(e,d,t));var h=e.docView.nearestDesc(d,!0);return{pos:l,inside:h?h.posAtStart-h.border:-1}}function V(e,t){var o=e.getClientRects();return o.length?o[t<0?0:o.length-1]:e.getBoundingClientRect()}function E(e,t){var o=e.docView.domFromPos(t),r=o.node,i=o.offset;if(3==r.nodeType&&(n.chrome||n.gecko)){var s=V(f(r,i,i),0);if(n.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=V(f(r,i-1,i-1),-1);if(Math.abs(a.left-s.left)<1&&a.top==s.top){var c=V(f(r,i,i+1),-1);return R(c,c.left<a.left)}}return s}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,d=!0;if(i<r.childNodes.length){var h=r.childNodes[i];1==h.nodeType&&(l=h.getBoundingClientRect())}if(!l&&i){var p=r.childNodes[i-1];1==p.nodeType&&(l=p.getBoundingClientRect(),d=!1)}return z(l||r.getBoundingClientRect(),d)}for(var u=-1;u<2;u+=2)if(u<0&&i){var v=void 0,g=3==r.nodeType?f(r,i-1,i):3==(v=r.childNodes[i-1]).nodeType?f(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(g){var y=V(g,1);if(y.top<y.bottom)return R(y,!1)}}else if(u>0&&i<m(r)){var b=void 0,w=3==r.nodeType?f(r,i,i+1):3==(b=r.childNodes[i]).nodeType?f(b):1==b.nodeType?b:null;if(w){var D=V(w,-1);if(D.top<D.bottom)return R(D,!0)}}return R(V(3==r.nodeType?f(r):r,0),!1)}function R(e,t){if(0==e.width)return e;var o=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:o,right:o}}function z(e,t){if(0==e.height)return e;var o=t?e.top:e.bottom;return{top:o,bottom:o,left:e.left,right:e.right}}function _(e,t,o){var n=e.state,r=e.root.activeElement;n!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return o()}finally{n!=t&&e.updateState(n),r!=e.dom&&r.focus()}}function B(e,t,o){var n=t.selection,r="up"==o?n.$anchor.min(n.$head):n.$anchor.max(n.$head);return _(e,t,function(){for(var t=e.docView.domFromPos(r.pos).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var i=E(e,r.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==o?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0})}var L=/[\u0590-\u08ac]/;function F(e,t,o){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,i=!r,s=r==n.parent.content.size,a=getSelection();return L.test(n.parent.textContent)&&a.modify?_(e,t,function(){var t=a.getRangeAt(0),r=a.focusNode,i=a.focusOffset;a.modify("move",o,"character");var s=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),s}):"left"==o||"backward"==o?i:s}var I=null,q=null,$=!1;function K(e,t,o){return I==t&&q==o?$:(I=t,q=o,$="up"==o||"down"==o?B(e,t,o):F(e,t,o))}var W=0,j=1,H=2,U=3,X=function(e,t,o,n){this.parent=e,this.children=t,this.dom=o,o.pmViewDesc=this,this.contentDOM=n,this.dirty=W},Y={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};X.prototype.matchesWidget=function(){return!1},X.prototype.matchesMark=function(){return!1},X.prototype.matchesNode=function(){return!1},X.prototype.matchesHack=function(){return!1},Y.beforePosition.get=function(){return!1},X.prototype.parseRule=function(){return null},X.prototype.stopEvent=function(){return!1},Y.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},Y.border.get=function(){return 0},X.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},X.prototype.posBeforeChild=function(e){for(var t=0,o=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return o;o+=n.size}},Y.posBefore.get=function(){return this.parent.posBeforeChild(this)},Y.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Y.posAfter.get=function(){return this.posBefore+this.size},Y.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},X.prototype.localPosFromDOM=function(e,t,o){var n;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(o<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){n=!1;break}if(c.parentNode.firstChild!=c)break}if(null==n&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){n=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==n?o>0:n)?this.posAtEnd:this.posAtStart},X.prototype.nearestDesc=function(e,t){for(var o=!0,n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r&&(!t||r.node)){if(!o||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(e):r.nodeDOM==e))return r;o=!1}}},X.prototype.getDesc=function(e){for(var t=e.pmViewDesc,o=t;o;o=o.parent)if(o==this)return t},X.prototype.posFromDOM=function(e,t,o){for(var n=e;;n=n.parentNode){var r=this.getDesc(n);if(r)return r.localPosFromDOM(e,t,o)}},X.prototype.descAt=function(e){for(var t=0,o=0;t<this.children.length;t++){var n=this.children[t],r=o+n.size;if(o==e&&r!=o){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<r)return n.descAt(e-o-n.border);o=r}},X.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,o=0;;o++){if(t==e){for(;o<this.children.length&&this.children[o].beforePosition;)o++;return{node:this.contentDOM,offset:o}}if(o==this.children.length)throw new Error("Invalid position "+e);var n=this.children[o],r=t+n.size;if(e<r)return n.domFromPos(e-t-n.border);t=r}},X.prototype.parseRange=function(e,t,o){if(void 0===o&&(o=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,i=0,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==n&&e<=c){var d=i+a.border;if(e>=d&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e-d,t-d,o+d);e=o+i;for(var f=s;f>0;f--){var h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){n=l(h.dom)+1;break}e-=h.size}-1==n&&(n=0)}if(n>-1&&t<=c){t=o+c;for(var p=s+1;p<this.children.length;p++){var u=this.children[p];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){r=l(u.dom);break}t+=u.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:r}},X.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},X.prototype.domAfterPos=function(e){var t=this.domFromPos(e),o=t.node,n=t.offset;if(1!=o.nodeType||n==o.childNodes.length)throw new RangeError("No node after pos "+e);return o.childNodes[n]},X.prototype.setSelection=function(e,t,o,n){for(var r=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(r>a&&i<l)return c.setSelection(e-a-c.border,t-a-c.border,o,n);a=l}var d=this.domFromPos(e),f=this.domFromPos(t),p=o.getSelection(),u=document.createRange();if(n||!h(d.node,d.offset,p.anchorNode,p.anchorOffset)||!h(f.node,f.offset,p.focusNode,p.focusOffset)){if(p.extend)u.setEnd(d.node,d.offset),u.collapse(!1);else{if(e>t){var m=d;d=f,f=m}u.setEnd(f.node,f.offset),u.setStart(d.node,d.offset)}p.removeAllRanges(),p.addRange(u),p.extend&&p.extend(f.node,f.offset)}},X.prototype.ignoreMutation=function(e){return!this.contentDOM},Y.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},X.prototype.markDirty=function(e,t){for(var o=0,n=0;n<this.children.length;n++){var r=this.children[n],i=o+r.size;if(o==i?e<=i&&t>=o:e<i&&t>o){var s=o+r.border,a=i-r.border;if(e>=s&&t<=a)return this.dirty=e==o||t==i?H:j,void(e==s&&t==a&&r.contentLost?r.dirty=U:r.markDirty(e-s,t-s));r.dirty=U}o=i}this.dirty=H},X.prototype.markParentsDirty=function(){for(var e=this.parent;e;e=e.parent){var t=H;e.dirty<t&&(e.dirty=t)}},Object.defineProperties(X.prototype,Y);var G=[],J=function(e){function t(t,o,n,r){var i,s=o.type.toDOM;if("function"==typeof s&&(s=s(n,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r})),!o.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,G,s,null),this.widget=o,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var o={beforePosition:{}};return o.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return this.dirty==W&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,o),t}(X),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:Oe(this.dom)}},t.prototype.ignoreMutation=function(){return!1},t}(J),Z=function(e){function t(t,o,n,r){e.call(this,t,G,o,null),this.textDOM=n,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var o={size:{}};return o.size.get=function(){return this.text.length},t.prototype.parseRule=function(){return{skip:Oe(this.dom)}},t.prototype.localPosFromDOM=function(e,t){if(e!=this.textDOM)return this.posAtStart+(t?this.size:0);var o=this.textDOM.nodeValue.indexOf("\ufeff");return this.posAtStart+t-(o>-1&&o<t?1:0)},t.prototype.domFromPos=function(e){var t=this.textDOM.nodeValue.indexOf("\ufeff");return{node:this.textDOM,offset:e+(t>-1&&t<=e?1:0)}},t.prototype.ignoreMutation=function(){return!1},Object.defineProperties(t.prototype,o),t}(X),ee=function(t){function o(e,o,n,r){t.call(this,e,[],n,r),this.mark=o}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.create=function(t,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=e.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new o(t,n,a.dom,a.contentDOM||a.dom)},o.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},o.prototype.matchesMark=function(e){return this.dirty!=U&&this.mark.eq(e)},o.prototype.markDirty=function(e,o){if(t.prototype.markDirty.call(this,e,o),this.dirty!=W){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=W}},o.prototype.slice=function(e,t,n){var r=o.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;t<s&&(i=Se(i,t,s,n)),e>0&&(i=Se(i,0,e,n));for(var a=0;a<i.length;a++)i[a].parent=r;return r.children=i,r},o}(X),te=function(o){function r(e,t,n,r,i,s,a,c,l){o.call(this,e,t.isLeaf?G:[],i,s),this.nodeDOM=a,this.node=t,this.outerDeco=n,this.innerDeco=r,s&&this.updateChildren(c,l)}o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r;var i={size:{},border:{}};return r.create=function(t,o,n,i,s,a){var c,l=s.nodeViews[o.type.name],d=l&&l(o,s,function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:a},n),f=d&&d.dom,h=d&&d.contentDOM;if(o.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(o.text);else if(!f){var p;f=(p=e.DOMSerializer.renderSpec(document,o.type.spec.toDOM(o))).dom,h=p.contentDOM}h||o.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),o.type.spec.draggable&&(f.draggable=!0));var u=f;return f=he(f,n,o),d?c=new ie(t,o,n,i,f,h,u,d,s,a+1):o.isText?new ne(t,o,n,i,f,u,s):new r(t,o,n,i,f,h,u,s,a+1)},r.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(o.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?o.contentElement=this.contentDOM:o.getContent=function(){return t.contentDOM?e.Fragment.empty:t.node.content},o},r.prototype.matchesNode=function(e,t,o){return this.dirty==W&&e.eq(this.node)&&pe(t,this.outerDeco)&&o.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},r.prototype.updateChildren=function(t,o){var n=this,r=this.node.inlineContent,i=o,s=r&&t.composing&&this.localCompositionNode(t,o),a=new me(this,s&&s.node);ye(this.node,this.innerDeco,function(o,s){o.spec.marks?a.syncToMarks(o.spec.marks,r,t):o.type.side>=0&&a.syncToMarks(s==n.node.childCount?e.Mark.none:n.node.child(s).marks,r,t),a.placeWidget(o,t,i)},function(e,o,n,s){a.syncToMarks(e.marks,r,t),a.findNodeMatch(e,o,n,s)||a.updateNextNode(e,o,n,t,s)||a.addNode(e,o,n,t,i),i+=e.nodeSize}),a.syncToMarks(G,r,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==H)&&(s&&this.protectLocalComposition(t,s),this.renderChildren())},r.prototype.renderChildren=function(){se(this.contentDOM,this.children,r.is),n.ios&&be(this.dom)},r.prototype.localCompositionNode=function(e,o){var n=e.state.selection,r=n.from,i=n.to;if(!(!(e.state.selection instanceof t.TextSelection)||r<o||i>o+this.node.content.size)){var s=e.root.getSelection(),a=we(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue.replace(/\ufeff/g,""),l=De(this.node.content,c,r-o,i-o);return l<0?null:{node:a,pos:l,text:c}}}},r.prototype.protectLocalComposition=function(e,t){var o=t.node,n=t.pos,r=t.text;if(!this.getDesc(o)){for(var i=o;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new Z(this,i,o,r);e.compositionNodes.push(s),this.children=Se(this.children,n,n+r.length,e,s)}},r.prototype.update=function(e,t,o,n){return!(this.dirty==U||!e.sameMarkup(this.node))&&(this.updateInner(e,t,o,n),!0)},r.prototype.updateInner=function(e,t,o,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=o,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=W},r.prototype.updateOuterDeco=function(e){if(!pe(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,o=this.dom;this.dom=de(this.dom,this.nodeDOM,le(this.outerDeco,this.node,t),le(e,this.node,t)),this.dom!=o&&(o.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},r.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},r.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(r.prototype,i),r}(X);function oe(e,t,o,n,r){return he(n,t,e),new te(null,e,t,o,n,n,n,r,0)}var ne=function(e){function t(t,o,n,r,i,s,a){e.call(this,t,o,n,r,i,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){var e=this.nodeDOM.parentNode;return e?{skip:e}:{ignore:!0}},t.prototype.update=function(e,t){return!(this.dirty==U||this.dirty!=W&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==W&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=W,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,o,n){return t==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,o,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type},t.prototype.slice=function(e,o,n){var r=this.node.cut(e,o),i=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)},t}(te),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return this.dirty==W},t}(X),ie=function(e){function t(t,o,n,r,i,s,a,c,l,d){e.call(this,t,o,n,r,i,s,a,l,d),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,o,n,r){if(this.dirty==U)return!1;if(this.spec.update){var i=this.spec.update(t,o);return i&&this.updateInner(t,o,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,o,n,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,o,n,r){this.spec.setSelection?this.spec.setSelection(t,o,n):e.prototype.setSelection.call(this,t,o,n,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(te);function se(e,t){for(var o=e.firstChild,n=0;n<t.length;n++){var r=t[n],i=r.dom;if(i.parentNode==e){for(;i!=o;)o=ue(o);o=o.nextSibling}else e.insertBefore(i,o);if(r instanceof ee){var s=o?o.previousSibling:e.lastChild;se(r.contentDOM,r.children),o=s?s.nextSibling:e.firstChild}}for(;o;)o=ue(o)}function ae(e){e&&(this.nodeName=e)}ae.prototype=Object.create(null);var ce=[new ae];function le(e,t,o){if(0==e.length)return ce;for(var n=o?ce[0]:new ae,r=[n],i=0;i<e.length;i++){var s=e[i].type.attrs,a=n;if(s)for(var c in s.nodeName&&r.push(a=new ae(s.nodeName)),s){var l=s[c];null!=l&&(o&&1==r.length&&r.push(a=n=new ae(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return r}function de(e,t,o,n){if(o==ce&&n==ce)return t;for(var r=t,i=0;i<n.length;i++){var s=n[i],a=o[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&r!=e&&(c=t.parentNode)&&c.tagName.toLowerCase()==s.nodeName?r=c:((c=document.createElement(s.nodeName)).appendChild(r),r=c)}fe(r,a||ce[0],s)}return r}function fe(e,t,o){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in o||e.removeAttribute(n);for(var r in o)"class"!=r&&"style"!=r&&"nodeName"!=r&&o[r]!=t[r]&&e.setAttribute(r,o[r]);if(t.class!=o.class){for(var i=t.class?t.class.split(" "):G,s=o.class?o.class.split(" "):G,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=o.style){if(t.style)for(var l,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=d.exec(t.style);)e.style[l[1].toLowerCase()]="";o.style&&(e.style.cssText+=o.style)}}function he(e,t,o){return de(e,e,ce,le(t,o,1!=e.nodeType))}function pe(e,t){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!e[o].type.eq(t[o].type))return!1;return!0}function ue(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var me=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var o=ve(e.node.content,e.children);this.preMatched=o.nodes,this.preMatchOffset=o.offset};function ve(e,t){for(var o=[],n=e.childCount,r=t.length-1;n>0&&r>=0;r--){var i=t[r],s=i.node;if(s){if(s!=e.child(n-1))break;o.push(i),--n}}return{nodes:o.reverse(),offset:n}}function ge(e,t){return e.type.side-t.type.side}function ye(e,t,o,n){var r=t.locals(e),i=0;if(0!=r.length)for(var s=0,a=[],c=null,l=0;;){if(s<r.length&&r[s].to==i){for(var d=r[s++],f=void 0;s<r.length&&r[s].to==i;)(f||(f=[d])).push(r[s++]);if(f){f.sort(ge);for(var h=0;h<f.length;h++)o(f[h],l)}else o(d,l)}var p=void 0,u=void 0;if(c)u=-1,p=c,c=null;else{if(!(l<e.childCount))break;u=l,p=e.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<r.length&&r[s].from==i;)a.push(r[s++]);var v=i+p.nodeSize;if(p.isText){var g=v;s<r.length&&r[s].from<g&&(g=r[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=p.cut(g-i),p=p.cut(0,g-i),v=g,u=-1)}n(p,a.length?a.slice():G,t.forChild(i,p),u),i=v}else for(var b=0;b<e.childCount;b++){var w=e.child(b);n(w,r,t.forChild(i,w),b),i+=w.nodeSize}}function be(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function we(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0)t=m(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function De(e,t,o,n){for(var r="",i=0,s=0;i<e.childCount;i++){var a=e.child(i),c=s+a.nodeSize;if(a.isText){if(r+=a.text,c>=n){for(var l=c-r.length,d=r.lastIndexOf(t);d>-1&&l+d>o;)d=r.lastIndexOf(t,d-1);if(d>-1&&l+d+t.length>=n)return l+d;if(c>n-t.length)break}}else r="";s=c}return-1}function Se(e,t,o,n,r){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,d=a+=c.size;l>=o||d<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,n)),r&&(i.push(r),r=null),d>o&&i.push(c.slice(o-l,c.size,n)))}return i}function Oe(e){var t=e.cloneNode(!0);return function e(t){if(1==t.nodeType)for(var o=t.firstChild;o;o=o.nextSibling)e(o);else 3==t.nodeType&&(t.nodeValue=t.nodeValue.replace(/\ufeff/g,""))}(t),t}function xe(e,o){var n=e.selection,r=n.$anchor,i=n.$head,s=o>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(o>0?s.after():s.before()):null:s;return a&&t.Selection.findFrom(a,o)}function Ce(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ne(e,o,r){var i=e.state.selection;if(i instanceof t.TextSelection){if(!i.empty||r.indexOf("s")>-1)return!1;if(e.endOfTextblock(o>0?"right":"left")){var s=xe(e.state,o);return!!(s&&s instanceof t.NodeSelection)&&Ce(e,s)}var a,c=i.$head,l=c.textOffset?null:o<0?c.nodeBefore:c.nodeAfter;if(!l||l.isText)return!1;var d=o<0?c.pos-l.nodeSize:c.pos;return!!(l.isAtom||(a=e.docView.descAt(d))&&!a.contentDOM)&&(t.NodeSelection.isSelectable(l)?Ce(e,new t.NodeSelection(o<0?e.state.doc.resolve(c.pos-l.nodeSize):c)):!!n.webkit&&Ce(e,new t.TextSelection(e.state.doc.resolve(o<0?d:d+l.nodeSize))))}if(i instanceof t.NodeSelection&&i.node.isInline)return Ce(e,new t.TextSelection(o>0?i.$to:i.$from));var f=xe(e.state,o);return!!f&&Ce(e,f)}function Me(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Te(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function ke(e){var t=e.root.getSelection(),o=t.focusNode,r=t.focusOffset;if(o){var i,s,a=!1;for(n.gecko&&1==o.nodeType&&r<Me(o)&&Te(o.childNodes[r])&&(a=!0);;)if(r>0)if(1!=o.nodeType){if(3!=o.nodeType||"\ufeff"!=o.nodeValue.charAt(r-1))break;n.ie&&n.ie_version<=11&&(a=!0),i=o,s=--r}else{var c=o.childNodes[r-1];if(Te(c))i=o,s=--r;else{if(3!=c.nodeType)break;r=(o=c).nodeValue.length}}else{if(Ae(o))break;for(var d=o.previousSibling;d&&Te(d);)i=o.parentNode,s=l(d),d=d.previousSibling;if(d)r=Me(o=d);else{if((o=o.parentNode)==e.dom)break;r=0}}a?Ve(e,t,o,r):i&&Ve(e,t,i,s)}}function Pe(e){var t=e.root.getSelection(),o=t.focusNode,n=t.focusOffset;if(o){for(var r,i,s=Me(o);;)if(n<s){if(1!=o.nodeType)break;if(!Te(o.childNodes[n]))break;r=o,i=++n}else{if(Ae(o))break;for(var a=o.nextSibling;a&&Te(a);)r=a.parentNode,i=l(a)+1,a=a.nextSibling;if(a)n=0,s=Me(o=a);else{if((o=o.parentNode)==e.dom)break;n=s=0}}r&&Ve(e,t,r,i)}}function Ae(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ve(e,t,o,n){if(g(t)){var r=document.createRange();r.setEnd(o,n),r.setStart(o,n),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(o,n);e.domObserver.setCurSelection()}function Ee(e,o,n){var r=e.state.selection;if(r instanceof t.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;var i=r.$from,s=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(o<0?"up":"down")){var a=xe(e.state,o);if(a&&a instanceof t.NodeSelection)return Ce(e,a)}if(!i.parent.inlineContent){var c=t.Selection.findFrom(o<0?i:s,o);return!c||Ce(e,c)}return!1}function Re(e,o){if(!(e.state.selection instanceof t.TextSelection))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(o>0?"forward":"backward"))return!0;var a=!r.textOffset&&(o<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return o<0?c.delete(r.pos-a.nodeSize,r.pos):c.delete(r.pos,r.pos+a.nodeSize),e.dispatch(c),!0}return!1}function ze(e,t,o){e.domObserver.stop(),t.contentEditable=o,e.domObserver.start()}function _e(e){if(n.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),o=t.focusNode,r=t.focusOffset;if(o&&1==o.nodeType&&0==r&&o.firstChild&&"false"==o.firstChild.contentEditable){var i=o.firstChild;ze(e,i,!0),setTimeout(function(){return ze(e,i,!1)},20)}}}function Be(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Le(e,t){var o=t.keyCode,r=Be(t);return 8==o||n.mac&&72==o&&"c"==r?Re(e,-1)||ke(e):46==o||n.mac&&68==o&&"c"==r?Re(e,1)||Pe(e):13==o||27==o||(37==o?Ne(e,-1,r)||ke(e):39==o?Ne(e,1,r)||Pe(e):38==o?Ee(e,-1,r)||ke(e):40==o?_e(e)||Ee(e,1,r)||Pe(e):r==(n.mac?"m":"c")&&(66==o||73==o||89==o||90==o))}function Fe(e,o){var n,r,i=e.root.getSelection(),s=e.state.doc,a=e.docView.nearestDesc(i.focusNode),c=a&&0==a.size,l=e.docView.posFromDOM(i.focusNode,i.focusOffset),d=s.resolve(l);if(g(i)){for(n=d;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&t.NodeSelection.isSelectable(a.node)&&a.parent){var f=a.posBefore;r=new t.NodeSelection(l==f?d:s.resolve(f))}}else n=s.resolve(e.docView.posFromDOM(i.anchorNode,i.anchorOffset));r||(r=Ue(e,n,d,"pointer"==o||e.state.selection.head<d.pos&&!c?1:-1));return r}function Ie(e,o,r){var i=e.state.selection;if(je(e,i),e.editable&&!e.hasFocus()){if(!o)return;n.gecko&&n.gecko_version<=55&&(e.domObserver.disconnectSelection(),e.dom.focus(),e.domObserver.connectSelection())}else if(!e.editable&&!Ye(e)&&!o)return;if(e.domObserver.disconnectSelection(),e.cursorWrapper)We(e);else{var s,a,c=i.anchor,l=i.head;!qe||i instanceof t.TextSelection||(i.$from.parent.inlineContent||(s=$e(e,i.from)),i.empty||i.$from.parent.inlineContent||(a=$e(e,i.to))),e.docView.setSelection(c,l,e.root,r),qe&&(s&&(s.contentEditable="false"),a&&(a.contentEditable="false")),i.visible?e.dom.classList.remove("ProseMirror-hideselection"):c!=l&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Ke(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}me.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},me.prototype.destroyBetween=function(e,t){if(e!=t){for(var o=e;o<t;o++)this.top.children[o].destroy();this.top.children.splice(e,t-e),this.changed=!0}},me.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},me.prototype.syncToMarks=function(e,t,o){for(var n=0,r=this.stack.length>>1,i=Math.min(r,e.length);n<i&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=W,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.top.children.splice(this.index,s-this.index)),this.top=this.top.children[this.index];else{var c=ee.create(this.top,e[r],t,o);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}},me.prototype.findNodeMatch=function(e,t,o,n){var r=-1,i=n<0?void 0:this.getPreMatch(n),s=this.top.children;if(i&&i.matchesNode(e,t,o))r=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,o)&&this.preMatched.indexOf(l)<0){r=a;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)},me.prototype.updateNextNode=function(e,t,o,n,r){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof te){var s=this.preMatched.indexOf(i);if(s>-1&&s+this.preMatchOffset!=r)return!1;var a=i.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==e.text&&i.dirty!=U&&pe(t,i.outerDeco)))&&i.update(e,t,o,n))return i.dom!=a&&(this.changed=!0),this.index++,!0}return!1},me.prototype.addNode=function(e,t,o,n,r){this.top.children.splice(this.index++,0,te.create(this.top,e,t,o,n,r)),this.changed=!0},me.prototype.placeWidget=function(e,t,o){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var n=new(e.spec.isCursorWrapper?Q:J)(this.top,e,t,o);this.top.children.splice(this.index++,0,n),this.changed=!0}},me.prototype.placeComposition=function(e,t){this.syncToMarks(G,!0,e),this.top.children[this.index]==t?this.index++:(this.top.children.splice(this.index++,0,t),this.changed=!0)},me.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof ee;)e=e.children[e.children.length-1];if(!e||!(e instanceof ne)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new re(this.top,G,t,null)),this.changed=!0}};var qe=n.safari||n.chrome&&n.chrome_version<63;function $e(e,t){var o=e.docView.domFromPos(t),n=o.node,r=o.offset,i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return i.contentEditable="true",i;if(s)return s.contentEditable="true",s}}function Ke(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var o=e.root.getSelection(),n=o.anchorNode,r=o.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){o.anchorNode==n&&o.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}function We(e){var t=e.root.getSelection(),o=document.createRange(),r=e.cursorWrapper.dom;o.setEnd(r,r.childNodes.length),o.collapse(!1),t.removeAllRanges(),t.addRange(o),!e.state.selection.visible&&n.ie&&n.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function je(e,o){if(o instanceof t.NodeSelection){var n=e.docView.descAt(o.from);n!=e.lastSelectedViewDesc&&(He(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else He(e)}function He(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ue(e,o,n,r){return e.someProp("createSelectionBetween",function(t){return t(e,o,n)})||t.TextSelection.between(o,n,r)}function Xe(e){return(!e.editable||e.root.activeElement==e.dom)&&Ye(e)}function Ye(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(o){return!1}}function Ge(e){return!1===e.type.spec.inclusive}function Je(e){var t=e.selection,o=t.$head,n=t.$anchor,r=t.visible,i=o.pos!=n.pos||r&&!o.parent.inlineContent?null:o;return i&&(!r||e.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Ge))?i:null}function Qe(e){var t=e.docView.domFromPos(e.state.selection.anchor),o=e.root.getSelection();return h(t.node,t.offset,o.anchorNode,o.anchorOffset)}function Ze(t,o,r){var i=t.docView.parseRange(o,r),s=i.node,a=i.fromOffset,c=i.toOffset,l=i.from,d=i.to,f=t.root.getSelection(),h=null,p=f.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],g(f)||h.push({node:f.focusNode,offset:f.focusOffset})),n.chrome&&8===t.lastKeyCode)for(var u=c;u>a;u--){var m=s.childNodes[u-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=u;break}if(!v||v.size)break}var y=t.state.doc,b=t.someProp("domParser")||e.DOMParser.fromSchema(t.state.schema),w=y.resolve(l),D=null,S=b.parse(s,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:et(b,w),context:w});if(h&&null!=h[0].pos){var O=h[0].pos,x=h[1]&&h[1].pos;null==x&&(x=O),D={anchor:O+l,head:x+l}}return{doc:S,sel:D,from:l,to:d}}function et(e,t){return function(o){var r=o.pmViewDesc;if(r)return r.parseRule();if("BR"==o.nodeName&&o.parentNode){if(n.safari&&/^(ul|ol)$/i.test(o.parentNode.nodeName))return e.matchTag(document.createElement("li"),t);if(o.parentNode.lastChild==o||n.safari&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}}}function tt(e,o,r,i){if(o<0){var s=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=Fe(e,s);if(!e.state.selection.eq(a)){var c=e.state.tr.setSelection(a);"pointer"==s?c.setMeta("pointer",!0):"key"==s&&c.scrollIntoView(),e.dispatch(c)}}else{var l=e.state.doc.resolve(o),d=l.sharedDepth(r);o=l.before(d+1),r=e.state.doc.resolve(r).after(d+1);var f,h,p=e.state.selection,u=Ze(e,o,r),m=e.state.doc,v=m.slice(u.from,u.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(f=e.state.selection.to,h="end"):(f=e.state.selection.from,h="start"),e.lastKeyCode=null;var g=st(v.content,u.doc.content,u.from,f,h);if(g){e.domChangeCount++,e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof t.TextSelection&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to));var b,w=u.doc.resolveNoCache(g.start-u.from),D=u.doc.resolveNoCache(g.endB-u.from);if(!(!w.sameParent(D)&&w.pos<u.doc.content.size&&(b=t.Selection.findFrom(u.doc.resolve(w.pos+1),1,!0))&&b.head==D.pos&&e.someProp("handleKeyDown",function(t){return t(e,y(13,"Enter"))})))if(e.state.selection.anchor>g.start&&rt(m,g.start,g.endA,w,D)&&e.someProp("handleKeyDown",function(t){return t(e,y(8,"Backspace"))}))n.android&&n.chrome&&(e.domObserver.suppressSelectionUpdates=!0,setTimeout(function(){return e.domObserver.suppressSelectionUpdates=!1},50));else{var S,O,x,C,N=g.start,M=g.endA;if(w.sameParent(D)&&w.parent.inlineContent)if(w.pos==D.pos)S=e.state.tr.delete(N,M),O=m.resolve(g.start).marksAcross(m.resolve(g.endA));else if(g.endA==g.endB&&(C=m.resolve(g.start))&&(x=nt(w.parent.content.cut(w.parentOffset,D.parentOffset),C.parent.content.cut(C.parentOffset,g.endA-C.start()))))S=e.state.tr,"add"==x.type?S.addMark(N,M,x.mark):S.removeMark(N,M,x.mark);else if(w.parent.child(w.index()).isText&&w.index()==D.index()-(D.textOffset?0:1)){var T=w.parent.textBetween(w.parentOffset,D.parentOffset);if(e.someProp("handleTextInput",function(t){return t(e,N,M,T)}))return;S=e.state.tr.insertText(T,N,M)}if(S||(S=e.state.tr.replace(N,M,u.doc.slice(g.start-u.from,g.endB-u.from))),u.sel){var k=ot(e,S.doc,u.sel);k&&S.setSelection(k)}O&&S.ensureMarks(O),e.dispatch(S.scrollIntoView())}}else if(!(i&&p instanceof t.TextSelection&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){var P=ot(e,e.state.doc,u.sel);P&&!P.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(P))}}else{var A=e.state,V=A.selection;e.dispatch(A.tr.replaceSelectionWith(A.schema.text(A.doc.textBetween(V.from,V.to)),!0).scrollIntoView())}}}function ot(e,t,o){return Math.max(o.anchor,o.head)>t.content.size?null:Ue(e,t.resolve(o.anchor),t.resolve(o.head))}function nt(t,o){for(var n,r,i,s=t.firstChild.marks,a=o.firstChild.marks,c=s,l=a,d=0;d<a.length;d++)c=a[d].removeFromSet(c);for(var f=0;f<s.length;f++)l=s[f].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var h=[],p=0;p<o.childCount;p++)h.push(i(o.child(p)));if(e.Fragment.from(h).eq(t))return{mark:r,type:n}}function rt(e,t,o,n,r){if(!n.parent.isTextblock||o-t<=r.pos-n.pos||it(n,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(it(i,!0,!0));return!(!s.parent.isTextblock||s.pos>o||it(s,!0,!1)<o)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function it(e,t,o){for(var n=e.depth,r=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,r++,t=!1;if(o)for(var i=e.node(n).maybeChild(e.indexAfter(n));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function st(e,t,o,n,r){var i=e.findDiffStart(t,o);if(null==i)return null;var s=e.findDiffEnd(t,o+e.size,o+t.size),a=s.a,c=s.b;"end"==r&&(n-=a+Math.max(0,i-Math.min(a,c))-i);if(a<i&&e.size<t.size)c=(i-=n<=i&&n>=a?i-n:0)+(c-a),a=i;else if(c<i){a=(i-=n<=i&&n>=c?i-n:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}function at(t,o){for(var n=[],r=o.content,i=o.openStart,s=o.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||e.DOMSerializer.fromSchema(t.state.schema),l=document.createElement("div");l.appendChild(c.serializeFragment(r));for(var d,f=l.firstChild;f&&1==f.nodeType&&(d=pt[f.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var p=document.createElement(d[h]);l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p)}f=l.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:l,text:t.someProp("clipboardTextSerializer",function(e){return e(o)})||o.content.textBetween(0,o.content.size,"\n\n")}}function ct(t,o,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!o)return null;var l=o&&(r||c||!n);if(l){if(t.someProp("transformPastedText",function(e){o=e(o)}),c)return new e.Slice(e.Fragment.from(t.state.schema.text(o)),0,0);var d=t.someProp("clipboardTextParser",function(e){return e(o,i)});d?a=d:(s=document.createElement("div"),o.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){s.appendChild(document.createElement("p")).textContent=e}))}else t.someProp("transformPastedHTML",function(e){n=e(n)}),s=mt(n);var f=s&&s.querySelector("[data-pm-slice]"),h=f&&/^(\d+) (\d+) (.*)/.exec(f.getAttribute("data-pm-slice"));if(!a){var p=t.someProp("clipboardParser")||t.someProp("domParser")||e.DOMParser.fromSchema(t.state.schema);a=p.parseSlice(s,{preserveWhitespace:!(!l&&!h),context:i})}return a=h?vt(new e.Slice(a.content,Math.min(a.openStart,+h[1]),Math.min(a.openEnd,+h[2])),h[3]):e.Slice.maxOpen(lt(a.content,i),!1),t.someProp("transformPasted",function(e){a=e(a)}),a}function lt(t,o){if(t.childCount<2)return t;for(var n=function(n){var r=o.node(n).contentMatchAt(o.index(n)),i=void 0,s=[];if(t.forEach(function(e){if(s){var t,o=r.findWrapping(e.type);if(!o)return s=null;if(t=s.length&&i.length&&ft(o,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=ht(s[s.length-1],i.length));var n=dt(e,o);s.push(n),r=r.matchType(n.type,n.attrs),i=o}}}),s)return{v:e.Fragment.from(s)}},r=o.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}function dt(t,o,n){void 0===n&&(n=0);for(var r=o.length-1;r>=n;r--)t=o[r].create(null,e.Fragment.from(t));return t}function ft(t,o,n,r,i){if(i<t.length&&i<o.length&&t[i]==o[i]){var s=ft(t,o,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(e.Fragment.from(dt(n,t,i+1))))}}function ht(t,o){if(0==o)return t;var n=t.content.replaceChild(t.childCount-1,ht(t.lastChild,o-1)),r=t.contentMatchAt(t.childCount).fillBefore(e.Fragment.empty,!0);return t.copy(n.append(r))}var pt={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},ut=null;function mt(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var o,n=(ut||(ut=document.implementation.createHTMLDocument("title"))).createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(o=r&&pt[r[1].toLowerCase()])&&(e=o.map(function(e){return"<"+e+">"}).join("")+e+o.map(function(e){return"</"+e+">"}).reverse().join(""),i=o.length),n.innerHTML=e;for(var s=0;s<i;s++)n=n.firstChild;return n}function vt(t,o){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(o)}catch(d){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=e.Fragment.from(l.create(n[c+1],i)),s++,a++}return new e.Slice(i,s,a)}var gt={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},yt=n.ie&&n.ie_version<=11,bt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};bt.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},bt.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var wt=function(e,t){var o=this;this.view=e,this.handleDOMChange=t,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){return o.flush(e)}),this.currentSelection=new bt,this.queue=[],yt&&(this.onCharData=function(e){o.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),window.setTimeout(function(){return o.flush()},20)}),this.onSelectionChange=this.onSelectionChange.bind(this)};wt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,gt),yt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},wt.prototype.stop=function(){var e=this,t=this.observer.takeRecords();if(t.length){for(var o=0;o<t.length;o++)e.queue.push(t[o]);window.setTimeout(function(){return e.flush()},20)}this.observer&&this.observer.disconnect(),yt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},wt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},wt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},wt.prototype.onSelectionChange=function(){if(Xe(this.view))return this.suppressSelectionUpdates?Ie(this.view):void this.flush()},wt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},wt.prototype.flush=function(e){if(this.view.docView){e||(e=this.observer.takeRecords()),this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),o=!this.currentSelection.eq(t)&&Ye(this.view),n=-1,r=-1,i=!1;if(this.view.editable)for(var s=0;s<e.length;s++){var a=this.registerMutation(e[s]);a&&(n=n<0?a.from:Math.min(a.from,n),r=r<0?a.to:Math.max(a.to,r),a.typeOver&&(i=!0))}(n>-1||o)&&(n>-1&&this.view.docView.markDirty(n,r),this.handleDOMChange(n,r,i),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Ie(this.view))}},wt.prototype.registerMutation=function(e){var t=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(t==this.view.docView||"contenteditable"==e.attributeName))return null;if(!t||t.ignoreMutation(e))return null;if("childList"==e.type){var o=e.previousSibling&&e.previousSibling.parentNode==e.target?l(e.previousSibling)+1:0,n=t.localPosFromDOM(e.target,o,-1),r=e.nextSibling&&e.nextSibling.parentNode==e.target?l(e.nextSibling):e.target.childNodes.length;return{from:n,to:t.localPosFromDOM(e.target,r,1)}}return"attributes"==e.type?{from:t.posAtStart-t.border,to:t.posAtEnd+t.border}:{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Dt={},St={};function Ot(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new wt(e,function(t,o,n){return tt(e,t,o,n)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var o=Dt[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!Tt(e,t)||Mt(e,t)||!e.editable&&t.type in St||o(e,t)})};for(var o in Dt)t(o);n.safari&&e.dom.addEventListener("input",function(){return null}),Nt(e)}function xt(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Ct(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}function Nt(e){e.someProp("handleDOMEvents",function(t){for(var o in t)e.eventHandlers[o]||e.dom.addEventListener(o,e.eventHandlers[o]=function(t){return Mt(e,t)})})}function Mt(e,t){return e.someProp("handleDOMEvents",function(o){var n=o[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function Tt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var o=t.target;o!=e.dom;o=o.parentNode)if(!o||11==o.nodeType||o.pmViewDesc&&o.pmViewDesc.stopEvent(t))return!1;return!0}function kt(e,t){Mt(e,t)||!Dt[t.type]||!e.editable&&t.type in St||Dt[t.type](e,t)}function Pt(e){return{left:e.clientX,top:e.clientY}}function At(e,t){var o=t.x-e.clientX,n=t.y-e.clientY;return o*o+n*n<100}function Vt(e,t,o,n,r){if(-1==n)return!1;for(var i=e.state.doc.resolve(n),s=function(n){if(e.someProp(t,function(t){return n>i.depth?t(e,o,i.nodeAfter,i.before(n),r,!0):t(e,o,i.node(n),i.before(n),r,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Et(e,t,o){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==o&&n.setMeta("pointer",!0),e.dispatch(n)}function Rt(e,o){if(-1==o)return!1;var n=e.state.doc.resolve(o),r=n.nodeAfter;return!!(r&&r.isAtom&&t.NodeSelection.isSelectable(r))&&(Et(e,new t.NodeSelection(n),"pointer"),!0)}function zt(e,o){if(-1==o)return!1;var n,r,i=e.state.selection;i instanceof t.NodeSelection&&(n=i.node);for(var s=e.state.doc.resolve(o),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(t.NodeSelection.isSelectable(c)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(Et(e,t.NodeSelection.create(e.state.doc,r),"pointer"),!0)}function _t(e,t,o,n,r){return Vt(e,"handleClickOn",t,o,n)||e.someProp("handleClick",function(o){return o(e,t,n)})||(r?zt(e,o):Rt(e,o))}function Bt(e,t,o,n){return Vt(e,"handleDoubleClickOn",t,o,n)||e.someProp("handleDoubleClick",function(o){return o(e,t,n)})}function Lt(e,t,o,n){return Vt(e,"handleTripleClickOn",t,o,n)||e.someProp("handleTripleClick",function(o){return o(e,t,n)})||Ft(e,o)}function Ft(e,o){var n=e.state.doc;if(-1==o)return!!n.inlineContent&&(Et(e,t.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(o),i=r.depth+1;i>0;i--){var s=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(s.inlineContent)Et(e,t.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!t.NodeSelection.isSelectable(s))continue;Et(e,t.NodeSelection.create(n,a),"pointer")}return!0}}function It(e){return Ht(e)}St.keydown=function(e,t){e.shiftKey=16==t.keyCode||t.shiftKey,Kt(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",function(o){return o(e,t)})||Le(e,t)?t.preventDefault():xt(e,"key"))},St.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},St.keypress=function(e,o){if(!(Kt(e,o)||!o.charCode||o.ctrlKey&&!o.altKey||n.mac&&o.metaKey))if(e.someProp("handleKeyPress",function(t){return t(e,o)}))o.preventDefault();else{var r=e.state.selection;if(!(r instanceof t.TextSelection&&r.$from.sameParent(r.$to))){var i=String.fromCharCode(o.charCode);e.someProp("handleTextInput",function(t){return t(e,r.$from.pos,r.$to.pos,i)})||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),o.preventDefault()}}};var qt=n.mac?"metaKey":"ctrlKey";Dt.mousedown=function(e,t){e.shiftKey=t.shiftKey;var o=It(e),n=Date.now(),r="singleClick";n-e.lastClick.time<500&&At(t,e.lastClick)&&!t[qt]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(Pt(t));i&&("singleClick"==r?e.mouseDown=new $t(e,i,t,o):("doubleClick"==r?Bt:Lt)(e,i.pos,i.inside,t)?t.preventDefault():xt(e,"pointer"))};var $t=function(e,o,r,i){var s,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=o,this.event=r,this.flushed=i,this.selectNode=r[qt],this.allowDefault=r.shiftKey,o.inside>-1)s=e.state.doc.nodeAt(o.inside),a=o.inside;else{var l=e.state.doc.resolve(o.pos);s=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var d=i?null:r.target,f=d?e.docView.nearestDesc(d,!0):null;this.target=f?f.dom:null,(s.type.spec.draggable&&!1!==s.type.spec.selectable||e.state.selection instanceof t.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:s,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&n.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return c.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xt(e,"pointer")};function Kt(e,t){return!!e.composing||!!(n.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}$t.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},$t.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var o=this.pos;this.view.state.doc!=this.startDoc&&(o=this.view.posAtCoords(Pt(e))),this.allowDefault||!o?(n.ie&&Je(this.view.state)&&this.view.updateState(this.view.state),xt(this.view,"pointer")):_t(this.view,o.pos,o.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!n.chrome||this.view.state.selection instanceof t.TextSelection||o.pos!=this.view.state.selection.from&&o.pos!=this.view.state.selection.to)?xt(this.view,"pointer"):(Et(this.view,t.Selection.near(this.view.state.doc.resolve(o.pos)),"pointer"),e.preventDefault())}},$t.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),xt(this.view,"pointer")},Dt.touchdown=function(e){It(e),xt(e,"pointer")},Dt.contextmenu=function(e){return It(e)};var Wt=n.android?5e3:-1;function jt(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return Ht(e)},t))}function Ht(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!!e.docView.dirty&&(e.updateState(e.state),!0)}function Ut(e,t){var o=t.ownerDocument,n=o.body.appendChild(o.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=o.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(function(){o.body.removeChild(n),e.focus()},50)}St.compositionstart=St.compositionupdate=function(e){e.composing||(e.domObserver.flush(),Ht(e),e.composing=!0),jt(e,Wt)},St.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,jt(e,20))};var Xt=n.ie&&n.ie_version<15||n.ios&&n.webkit_version<604;function Yt(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function Gt(e,t){var o=e.dom.ownerDocument,n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=o.body.appendChild(o.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){e.focus(),o.body.removeChild(r),n?Jt(e,r.value,null,t):Jt(e,r.textContent,r.innerHTML,t)},50)}function Jt(t,o,n,r){var i=ct(t,o,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",function(o){return o(t,r,i||e.Slice.empty)})||!i)return!0;var s=Yt(i),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Dt.copy=St.cut=function(e,t){var o=e.state.selection,n="cut"==t.type;if(!o.empty){var r=Xt?null:t.clipboardData,i=at(e,o.content()),s=i.dom,a=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):Ut(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},St.paste=function(e,t){var o=Xt?null:t.clipboardData;o&&(Jt(e,o.getData("text/plain"),o.getData("text/html"),t)||o.files.length>0)?t.preventDefault():Gt(e,t)};var Qt=function(e,t){this.slice=e,this.move=t},Zt=n.mac?"altKey":"ctrlKey";for(var eo in Dt.dragstart=function(e,o){var n=e.mouseDown;if(n&&n.done(),o.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(Pt(o));if(i&&i.pos>=r.from&&i.pos<=(r instanceof t.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(t.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(o.target&&1==o.target.nodeType){var s=e.docView.nearestDesc(o.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(t.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=at(e,a),l=c.dom,d=c.text;o.dataTransfer.clearData(),o.dataTransfer.setData(Xt?"Text":"text/html",l.innerHTML),Xt||o.dataTransfer.setData("text/plain",d),e.dragging=new Qt(a,!o[Zt])}},Dt.dragend=function(e){window.setTimeout(function(){return e.dragging=null},50)},St.dragover=St.dragenter=function(e,t){return t.preventDefault()},St.drop=function(e,n){var r=e.dragging;if(e.dragging=null,n.dataTransfer){var i=e.posAtCoords(Pt(n));if(i){var s=e.state.doc.resolve(i.pos);if(s){var a=r&&r.slice||ct(e,n.dataTransfer.getData(Xt?"Text":"text/plain"),Xt?null:n.dataTransfer.getData("text/html"),!1,s);if(a&&(n.preventDefault(),!e.someProp("handleDrop",function(t){return t(e,n,a,r&&r.move)}))){var c=a?o.dropPoint(e.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var l=e.state.tr;r&&r.move&&l.deleteSelection();var d=l.mapping.map(c),f=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,h=l.doc;if(f?l.replaceRangeWith(d,d,a.content.firstChild):l.replaceRange(d,d,a),!l.doc.eq(h)){var p=l.doc.resolve(d);f&&t.NodeSelection.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild)?l.setSelection(new t.NodeSelection(p)):l.setSelection(Ue(e,p,l.doc.resolve(l.mapping.map(c)))),e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},Dt.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},Dt.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.focused=!1)},Dt.beforeinput=function(e,t){if(n.chrome&&n.android&&"deleteContentBackward"==t.inputType){var o=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==o&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(t){return t(e,y(8,"Backspace"))}))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}},50)}},St)Dt[eo]=St[eo];function to(e,t){if(e==t)return!0;for(var o in e)if(e[o]!==t[o])return!1;for(var n in t)if(!(n in e))return!1;return!0}var oo=function(e,t){this.spec=t||co,this.side=this.spec.side||0,this.toDOM=e};oo.prototype.map=function(e,t,o,n){var r=e.mapResult(t.from+n,this.side<0?-1:1),i=r.pos;return r.deleted?null:new io(i-o,i-o,this)},oo.prototype.valid=function(){return!0},oo.prototype.eq=function(e){return this==e||e instanceof oo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&to(this.spec,e.spec))};var no=function(e,t){this.spec=t||co,this.attrs=e};no.prototype.map=function(e,t,o,n){var r=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-o,i=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-o;return r>=i?null:new io(r,i,this)},no.prototype.valid=function(e,t){return t.from<t.to},no.prototype.eq=function(e){return this==e||e instanceof no&&to(this.attrs,e.attrs)&&to(this.spec,e.spec)},no.is=function(e){return e.type instanceof no};var ro=function(e,t){this.spec=t||co,this.attrs=e};ro.prototype.map=function(e,t,o,n){var r=e.mapResult(t.from+n,1);if(r.deleted)return null;var i=e.mapResult(t.to+n,-1);return i.deleted||i.pos<=r.pos?null:new io(r.pos-o,i.pos-o,this)},ro.prototype.valid=function(e,t){var o=e.content.findIndex(t.from),n=o.index,r=o.offset;return r==t.from&&r+e.child(n).nodeSize==t.to},ro.prototype.eq=function(e){return this==e||e instanceof ro&&to(this.attrs,e.attrs)&&to(this.spec,e.spec)};var io=function(e,t,o){this.from=e,this.to=t,this.type=o},so={spec:{}};io.prototype.copy=function(e,t){return new io(e,t,this.type)},io.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},io.prototype.map=function(e,t,o){return this.type.map(e,this,t,o)},io.widget=function(e,t,o){return new io(e,e,new oo(t,o))},io.inline=function(e,t,o,n){return new io(e,t,new no(o,n))},io.node=function(e,t,o,n){return new io(e,t,new ro(o,n))},so.spec.get=function(){return this.type.spec},Object.defineProperties(io.prototype,so);var ao=[],co={},lo=function(e,t){this.local=e&&e.length?e:ao,this.children=t&&t.length?t:ao};lo.create=function(e,t){return t.length?yo(t,e,0,co):fo},lo.prototype.find=function(e,t,o){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,o),n},lo.prototype.findInner=function(e,t,o,n,r){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&o.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,o,n+c,r)}},lo.prototype.map=function(e,t,o){return this==fo||0==e.maps.length?this:this.mapInner(e,t,0,0,o||co)},lo.prototype.mapInner=function(e,t,o,n,r){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,o,n);a&&a.type.valid(t,a)?(i||(i=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?po(this.children,i,e,t,o,n,r):i?new lo(i.sort(bo)):fo},lo.prototype.add=function(e,t){return t.length?this==fo?lo.create(e,t):this.addInner(e,t,0):this},lo.prototype.addInner=function(e,t,o){var n,r=this,i=0;e.forEach(function(e,s){var a,c=s+o;if(a=vo(t,e,c)){for(n||(n=r.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(e,a,c+1):n.splice(i,0,s,s+e.nodeSize,yo(a,e,c+1,co)),i+=3}});var s=uo(i?go(t):t,-o);return new lo(s.length?this.local.concat(s).sort(bo):this.local,n||this.children)},lo.prototype.remove=function(e){return 0==e.length||this==fo?this:this.removeInner(e,0)},lo.prototype.removeInner=function(e,t){for(var o=this.children,n=this.local,r=0;r<o.length;r+=3){for(var i=void 0,s=o[r]+t,a=o[r+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){o==this.children&&(o=this.children.slice());var d=o[r+2].removeInner(i,s+1);d!=fo?o[r+2]=d:(o.splice(r,3),r-=3)}}if(n.length)for(var f=0,h=void 0;f<e.length;f++)if(h=e[f])for(var p=0;p<n.length;p++)n[p].type.eq(h.type)&&(n==this.local&&(n=this.local.slice()),n.splice(p--,1));return o==this.children&&n==this.local?this:n.length||o.length?new lo(n,o):fo},lo.prototype.forChild=function(e,t){var o,n;if(this==fo)return this;if(t.isLeaf)return lo.empty;for(var r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(o=this.children[r+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof no){var l=Math.max(i,c.from)-i,d=Math.min(s,c.to)-i;l<d&&(n||(n=[])).push(c.copy(l,d))}}if(n){var f=new lo(n.sort(bo));return o?new ho([f,o]):f}return o||fo},lo.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof lo)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var o=0;o<this.children.length;o+=3)if(this.children[o]!=e.children[o]||this.children[o+1]!=e.children[o+1]||!this.children[o+2].eq(e.children[o+2]))return!1;return!1},lo.prototype.locals=function(e){return wo(this.localsInner(e))},lo.prototype.localsInner=function(e){if(this==fo)return ao;if(e.inlineContent||!this.local.some(no.is))return this.local;for(var t=[],o=0;o<this.local.length;o++)this.local[o].type instanceof no||t.push(this.local[o]);return t};var fo=new lo;lo.empty=fo,lo.removeOverlap=wo;var ho=function(e){this.members=e};function po(e,t,o,n,r,i,s){for(var a=e.slice(),c=function(e,t,o,n){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:(l=n-o-(t-e)+(i-r))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<o.maps.length;l++)o.maps[l].forEach(c);for(var d=!1,f=0;f<a.length;f+=3)if(-1==a[f+1]){var h=o.map(a[f]+i),p=h-r;if(p<0||p>=n.content.size){d=!0;continue}var u=o.map(e[f+1]+i,-1)-r,m=n.content.findIndex(p),v=m.index,g=m.offset,y=n.maybeChild(v);if(y&&g==p&&g+y.nodeSize==u){var b=a[f+2].mapInner(o,y,h+1,a[f]+i+1,s);b!=fo?(a[f]=p,a[f+1]=u,a[f+2]=b):(a[f+1]=-2,d=!0)}else d=!0}if(d){var w=yo(mo(a,e,t||[],o,r,i,s),n,0,s);t=w.local;for(var D=0;D<a.length;D+=3)a[D+1]<0&&(a.splice(D,3),D-=3);for(var S=0,O=0;S<w.children.length;S+=3){for(var x=w.children[S];O<a.length&&a[O]<x;)O+=3;a.splice(O,0,w.children[S],w.children[S+1],w.children[S+2])}}return new lo(t&&t.sort(bo),a)}function uo(e,t){if(!t||!e.length)return e;for(var o=[],n=0;n<e.length;n++){var r=e[n];o.push(new io(r.from+t,r.to+t,r.type))}return o}function mo(e,t,o,n,r,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(n,r,t);c?o.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return o}function vo(e,t,o){if(t.isLeaf)return null;for(var n=o+t.nodeSize,r=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>o&&s.to<n&&((r||(r=[])).push(s),e[i]=null);return r}function go(e){for(var t=[],o=0;o<e.length;o++)null!=e[o]&&t.push(e[o]);return t}function yo(e,t,o,n){var r=[],i=!1;t.forEach(function(t,s){var a=vo(e,t,s+o);if(a){i=!0;var c=yo(a,t,o+s+1,n);c!=fo&&r.push(s,s+t.nodeSize,c)}});for(var s=uo(i?go(e):e,-o).sort(bo),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new lo(s,r):fo}function bo(e,t){return e.from-t.from||e.to-t.to}function wo(e){for(var t=e,o=0;o<t.length-1;o++){var n=t[o];if(n.from!=n.to)for(var r=o+1;r<t.length;r++){var i=t[r];if(i.from!=n.from){i.from<n.to&&(t==e&&(t=e.slice()),t[o]=n.copy(n.from,i.from),Do(t,r,n.copy(i.from,n.to)));break}i.to!=n.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,n.to),Do(t,r+1,i.copy(n.to,i.to)))}}return t}function Do(e,t,o){for(;t<e.length&&bo(o,e[t])>0;)t++;e.splice(t,0,o)}function So(e){var t=[];return e.someProp("decorations",function(o){var n=o(e.state);n&&n!=fo&&t.push(n)}),e.cursorWrapper&&t.push(lo.create(e.state.doc,[e.cursorWrapper.deco])),ho.from(t)}ho.prototype.forChild=function(e,t){if(t.isLeaf)return lo.empty;for(var o=[],n=0;n<this.members.length;n++){var r=this.members[n].forChild(e,t);r!=fo&&(r instanceof ho?o=o.concat(r.members):o.push(r))}return ho.from(o)},ho.prototype.eq=function(e){if(!(e instanceof ho)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},ho.prototype.locals=function(e){for(var t,o=!0,n=0;n<this.members.length;n++){var r=this.members[n].localsInner(e);if(r.length)if(t){o&&(t=t.slice(),o=!1);for(var i=0;i<r.length;i++)t.push(r[i])}else t=r}return t?wo(o?t:t.sort(bo)):ao},ho.from=function(e){switch(e.length){case 0:return fo;case 1:return e[0];default:return new ho(e)}};var Oo=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=To(this),this.cursorWrapper=null,Mo(this),this.nodeViews=Ao(this),this.docView=oe(this.state.doc,Co(this),So(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Ot(this),this.pluginViews=[],this.updatePluginViews()},xo={props:{},root:{}};function Co(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",function(o){if("function"==typeof o&&(o=o(e.state)),o)for(var n in o)"class"==n?t.class+=" "+o[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(o[n]))}),[io.node(0,e.state.doc.content.size,t)]}function No(e){var t=document.createElement("span");return t.textContent="\ufeff",e||(t.style.position="absolute",t.style.left="-100000px"),t}function Mo(t){var o=Je(t.state);if(!o||n.ie&&t.mouseDown)t.cursorWrapper=null;else{var r,i=t.state.selection.visible,s=t.state.storedMarks||o.marks();t.cursorWrapper&&e.Mark.sameSet(t.cursorWrapper.deco.spec.marks,s)&&"\ufeff"==t.cursorWrapper.dom.textContent&&t.cursorWrapper.deco.spec.visible==i?t.cursorWrapper.deco.pos!=o.pos&&(r=t.cursorWrapper.dom):r=No(i),r&&(t.cursorWrapper={dom:r,deco:io.widget(o.pos,r,{isCursorWrapper:!0,marks:s,raw:!0,visible:i})})}}function To(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function ko(e){var t=e.getSelection(),o=t.focusOffset,n=t.focusNode;return n&&3!=n.nodeType?[n,o,1==n.nodeType?n.childNodes[o-1]:null,1==n.nodeType?n.childNodes[o]:null]:null}function Po(e,t){var o=ko(t);if(!o||3==o[0].nodeType)return!1;for(var n=0;n<e.length;n++)if(o[n]!=e[n])return!0;return!1}function Ao(e){var t={};return e.someProp("nodeViews",function(e){for(var o in e)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=e[o])}),t}function Vo(e,t){var o=0,n=0;for(var r in e){if(e[r]!=t[r])return!0;o++}for(var i in t)n++;return o!=n}xo.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Oo.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Nt(this),this._props=e,this.updateStateInner(e.state,!0)},Oo.prototype.setProps=function(e){var t={};for(var o in this._props)t[o]=this._props[o];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},Oo.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Oo.prototype.updateStateInner=function(e,o){var r=this,i=this.state,s=!1;if(this.state=e,o){var a=Ao(this);Vo(a,this.nodeViews)&&(this.nodeViews=a,s=!0),Nt(this)}this.editable=To(this),Mo(this);var c=So(this),l=Co(this),d=o?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,l,c),h=f||!e.selection.eq(i.selection),p="preserve"==d&&h&&null==this.dom.style.overflowAnchor&&S(this);if(h){this.domObserver.stop();var u=!1;if(f){var m=n.chrome&&ko(this.root);!s&&this.docView.update(e.doc,l,c,this)||(this.docView.destroy(),this.docView=oe(e.doc,l,c,this.dom,this)),m&&(u=Po(m,this.root))}u||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Qe(this))?Ie(this,!1,u):(je(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(r)})||(e.selection instanceof t.NodeSelection?D(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):D(this,this.coordsAtPos(e.selection.head),v))}else p&&O(p)},Oo.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Oo.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var o=this.pluginViews[t];o.update&&o.update(this,e)}else{this.destroyPluginViews();for(var n=0;n<this.state.plugins.length;n++){var r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},Oo.prototype.someProp=function(e,t){var o,n=this._props&&this._props[e];if(null!=n&&(o=t?t(n):n))return o;var r=this.state.plugins;if(r)for(var i=0;i<r.length;i++){var s=r[i].props[e];if(null!=s&&(o=t?t(s):s))return o}},Oo.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Oo.prototype.focus=function(){this.domObserver.stop(),Ie(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},xo.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},Oo.prototype.posAtCoords=function(e){return A(this,e)},Oo.prototype.coordsAtPos=function(e){return E(this,e)},Oo.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},Oo.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Oo.prototype.posAtDOM=function(e,t,o){void 0===o&&(o=-1);var n=this.docView.posFromDOM(e,t,o);if(null==n)throw new RangeError("DOM position not inside the editor");return n},Oo.prototype.endOfTextblock=function(e,t){return K(this,t||this.state,e)},Oo.prototype.destroy=function(){this.docView&&(Ct(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],So(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Oo.prototype.dispatchEvent=function(e){return kt(this,e)},Oo.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Oo.prototype,xo),exports.EditorView=Oo,exports.Decoration=io,exports.DecorationSet=lo,exports.__serializeForClipboard=at,exports.__parseFromClipboard=ct,exports.__endComposition=Ht;
},{"prosemirror-model":"8m5x","prosemirror-state":"+fmv","prosemirror-transform":"0zfz"}],"Kb9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e=["p",0],r=["blockquote",0],n=["hr"],l=["pre",["code",0]],o=["br"],a={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return e}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return r}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return n}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return l}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){var e=t.attrs;return["img",{src:e.src,alt:e.alt,title:e.title}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return o}}},i=["em",0],u=["strong",0],s=["code",0],c={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){var e=t.attrs;return["a",{href:e.href,title:e.title},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return i}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return u}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return s}}},g=new t.Schema({nodes:a,marks:c});exports.nodes=a,exports.marks=c,exports.schema=g;
},{"prosemirror-model":"8m5x"}],"DPVH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-transform"),t=require("prosemirror-model"),r=["ol",0],n=["ul",0],o=["li",0],i={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?r:["ol",{start:e.attrs.order},0]}},a={parseDOM:[{tag:"ul"}],toDOM:function(){return n}},l={parseDOM:[{tag:"li"}],toDOM:function(){return o},defining:!0};function d(e,t){var r={};for(var n in e)r[n]=e[n];for(var o in t)r[o]=t[o];return r}function p(e,t,r){return e.append({ordered_list:d(i,{content:"list_item+",group:r}),bullet_list:d(a,{content:"list_item+",group:r}),list_item:d(l,{content:t})})}function s(r,n){return function(o,i){var a=o.selection,l=a.$from,d=a.$to,p=l.blockRange(d),s=!1,u=p;if(!p)return!1;if(p.depth>=2&&l.node(p.depth-1).type.compatibleContent(r)&&0==p.startIndex){if(0==l.index(p.depth-1))return!1;var f=o.doc.resolve(p.start-2);u=new t.NodeRange(f,f,p.depth),p.endIndex<p.parent.childCount&&(p=new t.NodeRange(l,o.doc.resolve(d.end(p.depth)),p.depth)),s=!0}var m=e.findWrapping(u,r,n,p);return!!m&&(i&&i(c(o.tr,p,m,s,r).scrollIntoView()),!0)}}function c(r,n,o,i,a){for(var l=t.Fragment.empty,d=o.length-1;d>=0;d--)l=t.Fragment.from(o[d].type.create(o[d].attrs,l));r.step(new e.ReplaceAroundStep(n.start-(i?2:0),n.end,n.start,n.end,new t.Slice(l,0,0),o.length,!0));for(var p=0,s=0;s<o.length;s++)o[s].type==a&&(p=s+1);for(var c=o.length-p,u=n.start+o.length-(i?2:0),f=n.parent,m=n.startIndex,g=n.endIndex,h=!0;m<g;m++,h=!1)!h&&e.canSplit(r.doc,u,c)&&(r.split(u,c),u+=2*c),u+=f.child(m).nodeSize;return r}function u(r){return function(n,o){var i=n.selection,a=i.$from,l=i.$to,d=i.node;if(d&&d.isBlock||a.depth<2||!a.sameParent(l))return!1;var p=a.node(-1);if(p.type!=r)return!1;if(0==a.parent.content.size){if(2==a.depth||a.node(-3).type!=r||a.index(-2)!=a.node(-2).childCount-1)return!1;if(o){for(var s=t.Fragment.empty,c=a.index(-1)>0,u=a.depth-(c?1:2);u>=a.depth-3;u--)s=t.Fragment.from(a.node(u).copy(s));s=s.append(t.Fragment.from(r.createAndFill()));var f=n.tr.replace(a.before(c?null:-1),a.after(-3),new t.Slice(s,c?3:2,2));f.setSelection(n.selection.constructor.near(f.doc.resolve(a.pos+(c?3:2)))),o(f.scrollIntoView())}return!0}var m=l.pos==a.end()?p.contentMatchAt(a.indexAfter(-1)).defaultType:null,g=n.tr.delete(a.pos,l.pos),h=m&&[null,{type:m}];return!!e.canSplit(g.doc,a.pos,2,h)&&(o&&o(g.split(a.pos,2,h).scrollIntoView()),!0)}}function f(e){return function(t,r){var n=t.selection,o=n.$from,i=n.$to,a=o.blockRange(i,function(t){return t.childCount&&t.firstChild.type==e});return!!a&&(!r||(o.node(a.depth-1).type==e?m(t,r,e,a):g(t,r,a)))}}function m(r,n,o,i){var a=r.tr,l=i.end,d=i.$to.end(i.depth);return l<d&&(a.step(new e.ReplaceAroundStep(l-1,d,l,d,new t.Slice(t.Fragment.from(o.create(null,i.parent.copy())),1,0),1,!0)),i=new t.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(d),i.depth)),n(a.lift(i,e.liftTarget(i)).scrollIntoView()),!0}function g(r,n,o){for(var i=r.tr,a=o.parent,l=o.end,d=o.endIndex-1,p=o.startIndex;d>p;d--)l-=a.child(d).nodeSize,i.delete(l-1,l+1);var s=i.doc.resolve(o.start),c=s.nodeAfter,u=0==o.startIndex,f=o.endIndex==a.childCount,m=s.node(-1),g=s.index(-1);if(!m.canReplace(g+(u?0:1),g+1,c.content.append(f?t.Fragment.empty:t.Fragment.from(a))))return!1;var h=s.pos,v=h+c.nodeSize;return i.step(new e.ReplaceAroundStep(h-(u?1:0),v+(f?1:0),h+1,v-1,new t.Slice((u?t.Fragment.empty:t.Fragment.from(a.copy(t.Fragment.empty))).append(f?t.Fragment.empty:t.Fragment.from(a.copy(t.Fragment.empty))),u?0:1,f?0:1),u?0:1)),n(i.scrollIntoView()),!0}function h(r){return function(n,o){var i=n.selection,a=i.$from,l=i.$to,d=a.blockRange(l,function(e){return e.childCount&&e.firstChild.type==r});if(!d)return!1;var p=d.startIndex;if(0==p)return!1;var s=d.parent,c=s.child(p-1);if(c.type!=r)return!1;if(o){var u=c.lastChild&&c.lastChild.type==s.type,f=t.Fragment.from(u?r.create():null),m=new t.Slice(t.Fragment.from(r.create(null,t.Fragment.from(s.type.create(null,f)))),u?3:1,0),g=d.start,h=d.end;o(n.tr.step(new e.ReplaceAroundStep(g-(u?3:1),h,g,h,m,1,!0)).scrollIntoView())}return!0}}exports.orderedList=i,exports.bulletList=a,exports.listItem=l,exports.addListNodes=p,exports.wrapInList=s,exports.splitListItem=u,exports.liftListItem=f,exports.sinkListItem=h;
},{"prosemirror-transform":"0zfz","prosemirror-model":"8m5x"}],"jpfE":[function(require,module,exports) {
for(var e={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},t={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},r="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),o="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),n="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i=r&&(a||+r[1]<57)||n&&a,f=0;f<10;f++)e[48+f]=e[96+f]=String(f);for(f=1;f<=24;f++)e[f+111]="F"+f;for(f=65;f<=90;f++)e[f]=String.fromCharCode(f+32),t[f]=String.fromCharCode(f);for(var g in e)t.hasOwnProperty(g)||(t[g]=e[g]);function d(r){var n=!(i&&(r.ctrlKey||r.altKey||r.metaKey)||o&&r.shiftKey&&r.key&&1==r.key.length)&&r.key||(r.shiftKey?t:e)[r.keyCode]||r.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}module.exports=d,d.base=e,d.shift=t;
},{}],"MRdg":[function(require,module,exports) {
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("w3c-keyname")),r=require("prosemirror-state"),n="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function i(e){var t,r,i,a,o=e.split(/-(?!$)/),f=o[o.length-1];"Space"==f&&(f=" ");for(var l=0;l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else if(/^s(hift)?$/i.test(s))i=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n?a=!0:r=!0}}return t&&(f="Alt-"+f),r&&(f="Ctrl-"+f),a&&(f="Meta-"+f),i&&(f="Shift-"+f),f}function a(e){var t=Object.create(null);for(var r in e)t[i(r)]=e[r];return t}function o(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}function f(e){return new r.Plugin({props:{handleKeyDown:l(e)}})}function l(e){var r=a(e);return function(e,n){var i,a=t(n),f=1==a.length&&" "!=a,l=r[o(a,n,!f)];if(l&&l(e.state,e.dispatch,e))return!0;if(f&&(n.shiftKey||n.altKey||n.metaKey)&&(i=t.base[n.keyCode])&&i!=a){var s=r[o(i,n,!0)];if(s&&s(e.state,e.dispatch,e))return!0}return!1}}exports.keymap=f,exports.keydownHandler=l;
},{"w3c-keyname":"jpfE","prosemirror-state":"+fmv"}],"vVBY":[function(require,module,exports) {
var t=200,e=function(){};e.prototype.append=function(n){return n.length?(n=e.from(n),!this.length&&n||n.length<t&&this.leafAppend(n)||this.length<t&&n.leafPrepend(this)||this.appendInner(n)):this},e.prototype.prepend=function(t){return t.length?e.from(t).append(this):this},e.prototype.appendInner=function(t){return new r(this,t)},e.prototype.slice=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=this.length),t>=n?e.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))},e.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},e.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},e.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(e,n){return r.push(t(e,n))},e,n),r},e.from=function(t){return t instanceof e?t:t&&t.length?new n(t):e.empty};var n=function(e){function n(t){e.call(this),this.values=t}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={length:{},depth:{}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(t,e){return 0==t&&e==this.length?this:new n(this.values.slice(t,e))},n.prototype.getInner=function(t){return this.values[t]},n.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},n.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},n.prototype.leafAppend=function(e){if(this.length+e.length<=t)return new n(this.values.concat(e.flatten()))},n.prototype.leafPrepend=function(e){if(this.length+e.length<=t)return new n(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(n.prototype,r),n}(e);e.empty=new n([]);var r=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(e);module.exports=e;
},{}],"Q4pH":[function(require,module,exports) {
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("rope-sequence")),n=require("prosemirror-transform"),r=require("prosemirror-state"),i=500,s=function(e,t){this.items=e,this.eventCount=t};function o(e,t){var n;return e.forEach(function(e,r){if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}s.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,i,o=this.items.length;;o--){if(n.items.get(o-1).selection){--o;break}}t&&(r=this.remapping(o,this.items.length),i=r.maps.length);var a,u,l=e.tr,m=[],h=[];return this.items.forEach(function(e,t){if(!e.step)return r||(r=n.remapping(o,t+1),i=r.maps.length),i--,void h.push(e);if(r){h.push(new p(e.map));var f,c=e.step.map(r.slice(i));c&&l.maybeStep(c).doc&&(f=l.mapping.maps[l.mapping.maps.length-1],m.push(new p(f,null,null,m.length+h.length))),i--,f&&r.appendMap(f,i)}else l.maybeStep(e.step);return e.selection?(a=r?e.selection.map(r.slice(i)):e.selection,u=new s(n.items.slice(0,o).append(h.reverse().concat(m)),n.eventCount-1),!1):void 0},this.items.length,0),{remaining:u,transform:l,selection:a}},s.prototype.addTransform=function(e,t,n,r){for(var i=[],a=this.eventCount,l=this.items,m=!r&&l.length?l.get(l.length-1):null,h=0;h<e.steps.length;h++){var f,c=e.steps[h].invert(e.docs[h]),g=new p(e.mapping.maps[h],c,t);(f=m&&m.merge(g))&&(g=f,h?i.pop():l=l.slice(0,l.length-1)),i.push(g),t&&(a++,t=null),r||(m=g)}var v=a-n.depth;return v>u&&(l=o(l,v),a-=v),new s(l.append(i),a)},s.prototype.remapping=function(e,t){var r=new n.Mapping;return this.items.forEach(function(t,n){var i=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?i=r.maps.length-t.mirrorOffset:null;r.appendMap(t.map,i)},e,t),r},s.prototype.addMaps=function(e){return 0==this.eventCount?this:new s(this.items.append(e.map(function(e){return new p(e)})),this.eventCount)},s.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(function(e){e.selection&&u--},r);var l=t;this.items.forEach(function(t){var r=o.getMirror(--l);if(null!=r){a=Math.min(a,r);var i=o.maps[r];if(t.step){var s=e.steps[r].invert(e.docs[r]),m=t.selection&&t.selection.map(o.slice(l+1,r));m&&u++,n.push(new p(i,s,m))}else n.push(new p(i))}},r);for(var m=[],h=t;h<a;h++)m.push(new p(o.maps[h]));var f=this.items.slice(0,r).append(m).append(n),c=new s(f,u);return c.emptyItemCount()>i&&(c=c.compress(this.items.length-n.length)),c},s.prototype.emptyItemCount=function(){var e=0;return this.items.forEach(function(t){t.step||e++}),e},s.prototype.compress=function(e){void 0===e&&(e=this.items.length);var n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach(function(t,s){if(s>=e)i.push(t),t.selection&&o++;else if(t.step){var a=t.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){var l=t.selection&&t.selection.map(n.slice(r));l&&o++;var m,h=new p(u.invert(),a,l),f=i.length-1;(m=i.length&&i[f].merge(h))?i[f]=m:i.push(h)}}else t.map&&r--},this.items.length,0),new s(t.from(i.reverse()),o)},s.empty=new s(t.empty,0);var p=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};p.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new p(t.getMap().invert(),t,this.selection)}};var a=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},u=20;function l(e,t,n,r){var i,o=n.getMeta(w);if(o)return o.historyState;n.getMeta(M)&&(e=new a(e.done,e.undone,null,0));var p=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(p&&p.getMeta(w))return p.getMeta(w).redo?new a(e.done.addTransform(n,null,r,d(t)),e.undone,h(n.mapping.maps[n.steps.length-1]),e.prevTime):new a(e.done,e.undone.addTransform(n,null,r,d(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||p&&!1===p.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new a(e.done.rebased(n,i),e.undone.rebased(n,i),f(e.prevRanges,n.mapping),e.prevTime):new a(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),f(e.prevRanges,n.mapping),e.prevTime);var u=e.prevTime<(n.time||0)-r.newGroupDelay||!p&&!m(n,e.prevRanges),l=p?f(e.prevRanges,n.mapping):h(n.mapping.maps[n.steps.length-1]);return new a(e.done.addTransform(n,u?t.selection.getBookmark():null,r,d(t)),s.empty,l,n.time)}function m(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(e,r){for(var i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}function h(e){var t=[];return e.forEach(function(e,n,r,i){return t.push(r,i)}),t}function f(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function c(e,t,n,r){var i=d(t),s=w.get(t).spec.config,o=(r?e.undone:e.done).popEvent(t,i);if(o){var p=o.selection.resolve(o.transform.doc),u=(r?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,i),l=new a(r?u:o.remaining,r?o.remaining:u,null,0);n(o.transform.setSelection(p).setMeta(w,{redo:r,historyState:l}).scrollIntoView())}}var g=!1,v=null;function d(e){var t=e.plugins;if(v!=t){g=!1,v=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){g=!0;break}}return g}function y(e){return e.setMeta(M,!0)}var w=new r.PluginKey("history"),M=new r.PluginKey("closeHistory");function C(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new r.Plugin({key:w,state:{init:function(){return new a(s.empty,s.empty,null,0)},apply:function(t,n,r){return l(n,r,t,e)}},config:e})}function T(e,t){var n=w.getState(e);return!(!n||0==n.done.eventCount)&&(t&&c(n,e,t,!1),!0)}function E(e,t){var n=w.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&c(n,e,t,!0),!0)}function b(e){var t=w.getState(e);return t?t.done.eventCount:0}function S(e){var t=w.getState(e);return t?t.undone.eventCount:0}exports.HistoryState=a,exports.closeHistory=y,exports.history=C,exports.undo=T,exports.redo=E,exports.undoDepth=b,exports.redoDepth=S;
},{"rope-sequence":"vVBY","prosemirror-transform":"0zfz","prosemirror-state":"+fmv"}],"ysQj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-transform"),t=require("prosemirror-model"),r=require("prosemirror-state");function n(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function o(t,n,o){var a=t.selection.$cursor;if(!a||(o?!o.endOfTextblock("backward",t):a.parentOffset>0))return!1;var l=c(a);if(!l){var s=a.blockRange(),p=s&&e.liftTarget(s);return null!=p&&(n&&n(t.tr.lift(s,p).scrollIntoView()),!0)}var f=l.nodeBefore;if(!f.type.spec.isolating&&b(t,l,n))return!0;if(0==a.parent.content.size&&(i(f,"end")||r.NodeSelection.isSelectable(f))){if(n){var d=t.tr.deleteRange(a.before(),a.after());d.setSelection(i(f,"end")?r.Selection.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):r.NodeSelection.create(d.doc,l.pos-f.nodeSize)),n(d.scrollIntoView())}return!0}return!(!f.isAtom||l.depth!=a.depth-1)&&(n&&n(t.tr.delete(l.pos-f.nodeSize,l.pos).scrollIntoView()),!0)}function i(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function a(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var i=c(o),a=i&&i.nodeBefore;return!(!a||!r.NodeSelection.isSelectable(a))&&(t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)}function c(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function l(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var a=p(o);if(!a)return!1;var c=a.nodeAfter;if(b(e,a,t))return!0;if(0==o.parent.content.size&&(i(c,"start")||r.NodeSelection.isSelectable(c))){if(t){var l=e.tr.deleteRange(o.before(),o.after());l.setSelection(i(c,"start")?r.Selection.findFrom(l.doc.resolve(l.mapping.map(a.pos)),1):r.NodeSelection.create(l.doc,l.mapping.map(a.pos))),t(l.scrollIntoView())}return!0}return!(!c.isAtom||a.depth!=o.depth-1)&&(t&&t(e.tr.delete(a.pos,a.pos+c.nodeSize).scrollIntoView()),!0)}function s(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var i=p(o),a=i&&i.nodeAfter;return!(!a||!r.NodeSelection.isSelectable(a))&&(t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)}function p(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}function f(t,n){var o,i=t.selection,a=i instanceof r.NodeSelection;if(a){if(i.node.isTextblock||!e.canJoin(t.doc,i.from))return!1;o=i.from}else if(null==(o=e.joinPoint(t.doc,i.from,-1)))return!1;if(n){var c=t.tr.join(o);a&&c.setSelection(r.NodeSelection.create(c.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),n(c.scrollIntoView())}return!0}function d(t,n){var o,i=t.selection;if(i instanceof r.NodeSelection){if(i.node.isTextblock||!e.canJoin(t.doc,i.to))return!1;o=i.to}else if(null==(o=e.joinPoint(t.doc,i.to,1)))return!1;return n&&n(t.tr.join(o).scrollIntoView()),!0}function u(t,r){var n=t.selection,o=n.$from,i=n.$to,a=o.blockRange(i),c=a&&e.liftTarget(a);return null!=c&&(r&&r(t.tr.lift(a,c).scrollIntoView()),!0)}function v(e,t){var r=e.selection,n=r.$head,o=r.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function m(e,t){var n=e.selection,o=n.$head,i=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(i))return!1;var a=o.node(-1),c=o.indexAfter(-1),l=a.contentMatchAt(c).defaultType;if(!a.canReplaceWith(c,c,l))return!1;if(t){var s=o.after(),p=e.tr.replaceWith(s,s,l.createAndFill());p.setSelection(r.Selection.near(p.doc.resolve(s),1)),t(p.scrollIntoView())}return!0}function h(e,t){var n=e.selection,o=n.$from,i=n.$to;if(o.parent.inlineContent||i.parent.inlineContent)return!1;var a=o.parent.contentMatchAt(i.indexAfter()).defaultType;if(!a||!a.isTextblock)return!1;if(t){var c=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,l=e.tr.insert(c,a.createAndFill());l.setSelection(r.TextSelection.create(l.doc,c+1)),t(l.scrollIntoView())}return!0}function x(t,r){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(e.canSplit(t.doc,o))return r&&r(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),a=i&&e.liftTarget(i);return null!=a&&(r&&r(t.tr.lift(i,a).scrollIntoView()),!0)}function S(n,o){var i=n.selection,a=i.$from,c=i.$to;if(n.selection instanceof r.NodeSelection&&n.selection.node.isBlock)return!(!a.parentOffset||!e.canSplit(n.doc,a.pos))&&(o&&o(n.tr.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(o){var l=c.parentOffset==c.parent.content.size,s=n.tr;n.selection instanceof r.TextSelection&&s.deleteSelection();var p=0==a.depth?null:a.node(-1).contentMatchAt(a.indexAfter(-1)).defaultType,f=l&&p?[{type:p}]:null,d=e.canSplit(s.doc,s.mapping.map(a.pos),1,f);f||d||!e.canSplit(s.doc,s.mapping.map(a.pos),1,p&&[{type:p}])||(f=[{type:p}],d=!0),d&&(s.split(s.mapping.map(a.pos),1,f),l||a.parentOffset||a.parent.type==p||!a.node(-1).canReplace(a.index(-1),a.indexAfter(-1),t.Fragment.from(p.create(),a.parent))||s.setNodeMarkup(s.mapping.map(a.before()),p)),o(s.scrollIntoView())}return!0}function g(e,t){return S(e,t&&function(r){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();n&&r.ensureMarks(n),t(r)})}function k(e,t){var n,o=e.selection,i=o.$from,a=o.to,c=i.sharedDepth(a);return 0!=c&&(n=i.before(c),t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,n))),!0)}function y(e,t){return t&&t(e.tr.setSelection(new r.AllSelection(e.doc))),!0}function w(t,r,n){var o=r.nodeBefore,i=r.nodeAfter,a=r.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&r.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!(!r.parent.canReplace(a,a+1)||!i.isTextblock&&!e.canJoin(t.doc,r.pos))&&(n&&n(t.tr.clearIncompatible(r.pos,o.type,o.contentMatchAt(o.childCount)).join(r.pos).scrollIntoView()),!0))}function b(n,o,i){var a,c,l=o.nodeBefore,s=o.nodeAfter;if(l.type.spec.isolating||s.type.spec.isolating)return!1;if(w(n,o,i))return!0;if(o.parent.canReplace(o.index(),o.index()+1)&&(a=(c=l.contentMatchAt(l.childCount)).findWrapping(s.type))&&c.matchType(a[0]||s.type).validEnd){if(i){for(var p=o.pos+s.nodeSize,f=t.Fragment.empty,d=a.length-1;d>=0;d--)f=t.Fragment.from(a[d].create(null,f));f=t.Fragment.from(l.copy(f));var u=n.tr.step(new e.ReplaceAroundStep(o.pos-1,p,o.pos,p,new t.Slice(f,1,0),a.length,!0)),v=p+2*a.length;e.canJoin(u.doc,v)&&u.join(v),i(u.scrollIntoView())}return!0}var m=r.Selection.findFrom(o,1),h=m&&m.$from.blockRange(m.$to),x=h&&e.liftTarget(h);return null!=x&&x>=o.depth&&(i&&i(n.tr.lift(h,x).scrollIntoView()),!0)}function I(t,r){return function(n,o){var i=n.selection,a=i.$from,c=i.$to,l=a.blockRange(c),s=l&&e.findWrapping(l,t,r);return!!s&&(o&&o(n.tr.wrap(l,s).scrollIntoView()),!0)}}function M(e,t){return function(r,n){var o=r.selection,i=o.from,a=o.to,c=!1;return r.doc.nodesBetween(i,a,function(n,o){if(c)return!1;if(n.isTextblock&&!n.hasMarkup(e,t))if(n.type==e)c=!0;else{var i=r.doc.resolve(o),a=i.index();c=i.parent.canReplaceWith(a,a+1,e)}}),!!c&&(n&&n(r.tr.setBlockType(i,a,e,t).scrollIntoView()),!0)}}function $(e,t,r){for(var n=function(n){var o=t[n],i=o.$from,a=o.$to,c=0==i.depth&&e.type.allowsMarkType(r);if(e.nodesBetween(i.pos,a.pos,function(e){if(c)return!1;c=e.inlineContent&&e.type.allowsMarkType(r)}),c)return{v:!0}},o=0;o<t.length;o++){var i=n(o);if(i)return i.v}return!1}function A(e,t){return function(r,n){var o=r.selection,i=o.empty,a=o.$cursor,c=o.ranges;if(i&&!a||!$(r.doc,c,e))return!1;if(n)if(a)e.isInSet(r.storedMarks||a.marks())?n(r.tr.removeStoredMark(e)):n(r.tr.addStoredMark(e.create(t)));else{for(var l=!1,s=r.tr,p=0;!l&&p<c.length;p++){var f=c[p],d=f.$from,u=f.$to;l=r.doc.rangeHasMark(d.pos,u.pos,e)}for(var v=0;v<c.length;v++){var m=c[v],h=m.$from,x=m.$to;l?s.removeMark(h.pos,x.pos,e):s.addMark(h.pos,x.pos,e.create(t))}n(s.scrollIntoView())}return!0}}function T(t,r){return function(n){if(!n.isGeneric)return t(n);for(var o=[],i=0;i<n.mapping.maps.length;i++){for(var a=n.mapping.maps[i],c=0;c<o.length;c++)o[c]=a.map(o[c]);a.forEach(function(e,t,r,n){return o.push(r,n)})}for(var l=[],s=0;s<o.length;s+=2)for(var p=o[s],f=o[s+1],d=n.doc.resolve(p),u=d.sharedDepth(f),v=d.node(u),m=d.indexAfter(u),h=d.after(u+1);h<=f;++m){var x=v.maybeChild(m);if(!x)break;if(m&&-1==l.indexOf(h)){var S=v.child(m-1);S.type==x.type&&r(S,x)&&l.push(h)}h+=x.nodeSize}l.sort(function(e,t){return e-t});for(var g=l.length-1;g>=0;g--)e.canJoin(n.doc,l[g])&&n.join(l[g]);t(n)}}function V(e,t){if(Array.isArray(t)){var r=t;t=function(e){return r.indexOf(e.type.name)>-1}}return function(r,n){return e(r,n&&T(n,t))}}function B(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,r,n){for(var o=0;o<e.length;o++)if(e[o](t,r,n))return!0;return!1}}var N=B(n,o,a),C=B(n,l,s),O={Enter:B(v,h,x,S),"Mod-Enter":m,Backspace:N,"Mod-Backspace":N,Delete:C,"Mod-Delete":C,"Mod-a":y},z={"Ctrl-h":O.Backspace,"Alt-Backspace":O["Mod-Backspace"],"Ctrl-d":O.Delete,"Ctrl-Alt-Backspace":O["Mod-Delete"],"Alt-Delete":O["Mod-Delete"],"Alt-d":O["Mod-Delete"]};for(var R in O)z[R]=O[R];var j="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),F=j?z:O;exports.deleteSelection=n,exports.joinBackward=o,exports.selectNodeBackward=a,exports.joinForward=l,exports.selectNodeForward=s,exports.joinUp=f,exports.joinDown=d,exports.lift=u,exports.newlineInCode=v,exports.exitCode=m,exports.createParagraphNear=h,exports.liftEmptyBlock=x,exports.splitBlock=S,exports.splitBlockKeepMarks=g,exports.selectParentNode=k,exports.selectAll=y,exports.wrapIn=I,exports.setBlockType=M,exports.toggleMark=A,exports.autoJoin=V,exports.chainCommands=B,exports.pcBaseKeymap=O,exports.macBaseKeymap=z,exports.baseKeymap=F;
},{"prosemirror-transform":"0zfz","prosemirror-model":"8m5x","prosemirror-state":"+fmv"}],"4gyH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-state"),e=require("prosemirror-transform");function o(e){return void 0===e&&(e={}),new t.Plugin({view:function(t){return new i(t,e)}})}var i=function(t,e){var o=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(e){var i=function(t){return o[e](t)};return t.dom.addEventListener(e,i),{name:e,handler:i}})};i.prototype.destroy=function(){var t=this;this.handlers.forEach(function(e){var o=e.name,i=e.handler;return t.editorView.dom.removeEventListener(o,i)})},i.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},i.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.remove(),this.element=null):this.updateOverlay())},i.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var o=e.nodeBefore,i=e.nodeAfter;if(o||i){var r=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0)).getBoundingClientRect(),s=o?r.bottom:r.top;o&&i&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!t){var n=this.editorView.coordsAtPos(this.cursorPos);t={left:n.left-this.width/2,right:n.left+this.width/2,top:n.top,bottom:n.bottom}}var l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var d=l==document.body&&"static"==getComputedStyle(l).position?{left:-pageXOffset,top:-pageYOffset}:l.getBoundingClientRect();this.element.style.left=t.left-d.left+"px",this.element.style.top=t.top-d.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},i.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.setCursor(null)},t)},i.prototype.dragover=function(t){var o=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(o){var i=o.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=e.dropPoint(this.editorView.state.doc,i,this.editorView.dragging.slice))&&(i=o.pos),this.setCursor(i),this.scheduleRemoval(5e3)}},i.prototype.dragend=function(){this.scheduleRemoval(20)},i.prototype.drop=function(){this.scheduleRemoval(20)},i.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)},exports.dropCursor=o;
},{"prosemirror-state":"+fmv","prosemirror-transform":"0zfz"}],"Np5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-keymap"),r=require("prosemirror-state"),t=require("prosemirror-view"),n=require("prosemirror-model"),o=function(e){function r(r){e.call(this,r,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.map=function(t,n){var o=t.resolve(n.map(this.head));return r.valid(o)?new r(o):e.near(o)},r.prototype.content=function(){return n.Slice.empty},r.prototype.eq=function(e){return e instanceof r&&e.head==this.head},r.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},r.fromJSON=function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new r(e.resolve(t.pos))},r.prototype.getBookmark=function(){return new i(this.anchor)},r.valid=function(e){var r=e.parent;if(r.isTextblock||!a(e)||!u(e))return!1;var t=r.type.spec.allowGapCursor;if(null!=t)return t;var n=r.contentMatchAt(e.index()).defaultType;return n&&n.isTextblock},r.findFrom=function(e,t,n){if(!n&&r.valid(e))return e;for(var o=e.pos,i=null,a=e.depth;;a--){var u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){i=u.maybeChild(t>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;o+=t;var l=e.doc.resolve(o);if(r.valid(l))return l}for(;i=t>0?i.firstChild:i.lastChild;){o+=t;var c=e.doc.resolve(o);if(r.valid(c))return c}return null},r}(r.Selection);o.prototype.visible=!1,r.Selection.jsonID("gapcursor",o);var i=function(e){this.pos=e};function a(e){for(var r=e.depth;r>=0;r--){var t=e.index(r);if(0!=t)for(var n=e.node(r).child(t-1);;n=n.lastChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}function u(e){for(var r=e.depth;r>=0;r--){var t=e.indexAfter(r),n=e.node(r);if(t!=n.childCount)for(var o=n.child(t);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}i.prototype.map=function(e){return new i(e.map(this.pos))},i.prototype.resolve=function(e){var t=e.resolve(this.pos);return o.valid(t)?new o(t):r.Selection.near(t)};var l=function(){return new r.Plugin({props:{decorations:f,createSelectionBetween:function(e,r,t){if(r.pos==t.pos&&o.valid(t))return new o(t)},handleClick:p,handleKeyDown:c}})},c=e.keydownHandler({ArrowLeft:s("horiz",-1),ArrowRight:s("horiz",1),ArrowUp:s("vert",-1),ArrowDown:s("vert",1)});function s(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,i,a){var u=e.selection,l=t>0?u.$to:u.$from,c=u.empty;if(u instanceof r.TextSelection){if(!a.endOfTextblock(n))return!1;c=!1,l=e.doc.resolve(t>0?l.after():l.before())}var s=o.findFrom(l,t,c);return!!s&&(i&&i(e.tr.setSelection(new o(s))),!0)}}function p(e,t,n){if(e.someProp("editable",function(r){return!1===r(e.state)}))return!1;var i=e.state.doc.resolve(t);if(!o.valid(i))return!1;var a=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(a>-1&&r.NodeSelection.isSelectable(e.state.doc.nodeAt(a)))&&(e.dispatch(e.state.tr.setSelection(new o(i))),!0)}function f(e){if(!(e.selection instanceof o))return null;var r=document.createElement("div");return r.className="ProseMirror-gapcursor",t.DecorationSet.create(e.doc,[t.Decoration.widget(e.selection.head,r,{key:"gapcursor"})])}exports.gapCursor=l,exports.GapCursor=o;
},{"prosemirror-keymap":"MRdg","prosemirror-state":"+fmv","prosemirror-view":"Lkgx","prosemirror-model":"8m5x"}],"F9fT":[function(require,module,exports) {
var define;
var n;!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof n&&n.amd?n(t):e.crel=t()}(this,function(){var n="function",e="object",t="textContent",o="setAttribute",r="attrMap",i="isNode",f="isElement",u=typeof document===e?document:{},c=function(n,e){return typeof n===e},a=typeof Node===n?function(n){return n instanceof Node}:function(n){return n&&c(n,e)&&"nodeType"in n&&c(n.ownerDocument,e)},d=function(n){return n instanceof Array},l=function(n,e){d(e)?e.map(function(e){l(n,e)}):(p[i](e)||(e=u.createTextNode(e)),n.appendChild(e))};function p(){var a,y=arguments,s=y[0],m=y[1],v=2,x=y.length,b=p[r];if(s=p[f](s)?s:u.createElement(s),1===x)return s;if((!c(m,e)||p[i](m)||d(m))&&(--v,m=null),x-v==1&&c(y[v],"string")&&void 0!==s[t])s[t]=y[v];else for(;v<x;++v)if(null!=(a=y[v]))if(d(a))for(var g=0;g<a.length;++g)l(s,a[g]);else l(s,a);for(var h in m)if(b[h]){var N=b[h];typeof N===n?N(s,m[h]):s[o](N,m[h])}else c(m[h],n)?s[h]=m[h]:s[o](h,m[h]);return s}return p[r]={},p[f]=function(n){return p[i](n)&&1===n.nodeType},p[i]=a,"undefined"!=typeof Proxy&&(p.proxy=new Proxy(p,{get:function(n,e){return!(e in p)&&(p[e]=p.bind(null,e)),p[e]}})),p});
},{}],"5gaU":[function(require,module,exports) {
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("crel")),n=require("prosemirror-commands"),i=require("prosemirror-history"),o=require("prosemirror-state"),r="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink",a="ProseMirror-icon";function l(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}function h(t){var e=document.createElement("div");if(e.className=a,t.path){var n="pm-icon-"+l(t.path).toString(16);document.getElementById(n)||u(n,t);var i=e.appendChild(document.createElementNS(r,"svg"));i.style.width=t.width/t.height+"em",i.appendChild(document.createElementNS(r,"use")).setAttributeNS(s,"href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else t.dom?e.appendChild(t.dom.cloneNode(!0)):(e.appendChild(document.createElement("span")).textContent=t.text||"",t.css&&(e.firstChild.style.cssText=t.css));return e}function u(t,e){var n=document.getElementById(a+"-collection");n||((n=document.createElementNS(r,"svg")).id=a+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var i=document.createElementNS(r,"symbol");i.id=t,i.setAttribute("viewBox","0 0 "+e.width+" "+e.height),i.appendChild(document.createElementNS(r,"path")).setAttribute("d",e.path),n.appendChild(i)}var d="ProseMirror-menu",c=function(t){this.spec=t};function p(t,e){return t._props.translate?t._props.translate(e):e}c.prototype.render=function(t){var n=this.spec,i=n.render?n.render(t):n.icon?h(n.icon):n.label?e("div",null,p(t,n.label)):null;if(!i)throw new RangeError("MenuItem without icon or label property");if(n.title){var o="function"==typeof n.title?n.title(t.state):n.title;i.setAttribute("title",p(t,o))}return n.class&&i.classList.add(n.class),n.css&&(i.style.cssText+=n.css),i.addEventListener("mousedown",function(e){e.preventDefault(),i.classList.contains(d+"-disabled")||n.run(t.state,t.dispatch,t,e)}),{dom:i,update:function(t){if(n.select){var e=n.select(t);if(i.style.display=e?"":"none",!e)return!1}var o=!0;if(n.enable&&(o=n.enable(t)||!1,A(i,d+"-disabled",!o)),n.active){var r=o&&n.active(t)||!1;A(i,d+"-active",r)}return!0}}};var v={time:0,node:null};function f(t){v.time=Date.now(),v.node=t.target}function m(t){return Date.now()-100<v.time&&v.node&&t.contains(v.node)}var w=function(t,e){this.options=e||{},this.content=Array.isArray(t)?t:[t]};function g(t,n){for(var i=[],o=[],r=0;r<t.length;r++){var s=t[r].render(n),a=s.dom,l=s.update;i.push(e("div",{class:d+"-dropdown-item"},a)),o.push(l)}return{dom:i,update:q(o,i)}}function q(t,e){return function(n){for(var i=!1,o=0;o<t.length;o++){var r=t[o](n);e[o].style.display=r?"":"none",r&&(i=!0)}return i}}w.prototype.render=function(t){var n=this,i=g(this.content,t),o=e("div",{class:d+"-dropdown "+(this.options.class||""),style:this.options.css},p(t,this.options.label));this.options.title&&o.setAttribute("title",p(t,this.options.title));var r=e("div",{class:d+"-dropdown-wrap"},o),s=null,a=null,l=function(){s&&s.close()&&(s=null,window.removeEventListener("mousedown",a))};return o.addEventListener("mousedown",function(t){t.preventDefault(),f(t),s?l():(s=n.expand(r,i.dom),window.addEventListener("mousedown",a=function(){m(r)||l()}))}),{dom:r,update:function(t){var e=i.update(t);return r.style.display=e?"":"none",e}}},w.prototype.expand=function(t,n){var i=e("div",{class:d+"-dropdown-menu "+(this.options.class||"")},n),o=!1;return t.appendChild(i),{close:function(){if(!o)return o=!0,t.removeChild(i),!0},node:i}};var y=function(t,e){this.options=e||{},this.content=Array.isArray(t)?t:[t]};function M(t,n){for(var i=document.createDocumentFragment(),o=[],r=[],s=0;s<n.length;s++){for(var a=n[s],l=[],h=[],u=0;u<a.length;u++){var c=a[u].render(t),p=c.dom,v=c.update,f=e("span",{class:d+"item"},p);i.appendChild(f),h.push(f),l.push(v)}l.length&&(o.push(q(l,h)),s<n.length-1&&r.push(i.appendChild(b())))}return{dom:i,update:function(t){for(var e=!1,n=!1,i=0;i<o.length;i++){var s=o[i](t);i&&(r[i-1].style.display=n&&s?"":"none"),n=s,s&&(e=!0)}return e}}}function b(){return e("span",{class:d+"separator"})}y.prototype.render=function(t){var n=g(this.content,t),i=e("div",{class:d+"-submenu-label"},p(t,this.options.label)),o=e("div",{class:d+"-submenu-wrap"},i,e("div",{class:d+"-submenu"},n.dom)),r=null;return i.addEventListener("mousedown",function(t){t.preventDefault(),f(t),A(o,d+"-submenu-wrap-active"),r||window.addEventListener("mousedown",r=function(){m(o)||(o.classList.remove(d+"-submenu-wrap-active"),window.removeEventListener("mousedown",r),r=null)})}),{dom:o,update:function(t){var e=n.update(t);return o.style.display=e?"":"none",e}}};var x={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},z=new c({title:"Join with above block",run:n.joinUp,select:function(t){return n.joinUp(t)},icon:x.join}),N=new c({title:"Lift out of enclosing block",run:n.lift,select:function(t){return n.lift(t)},icon:x.lift}),C=new c({title:"Select parent node",run:n.selectParentNode,select:function(t){return n.selectParentNode(t)},icon:x.selectParentNode}),E=new c({title:"Undo last change",run:i.undo,enable:function(t){return i.undo(t)},icon:x.undo}),L=new c({title:"Redo last undone change",run:i.redo,enable:function(t){return i.redo(t)},icon:x.redo});function H(t,e){var i={run:function(i,o){return n.wrapIn(t,e.attrs)(i,o)},select:function(i){return n.wrapIn(t,e.attrs instanceof Function?null:e.attrs)(i)}};for(var o in e)i[o]=e[o];return new c(i)}function I(t,e){var i=n.setBlockType(t,e.attrs),o={run:i,enable:function(t){return i(t)},active:function(n){var i=n.selection,o=i.$from,r=i.to,s=i.node;return s?s.hasMarkup(t,e.attrs):r<=o.end()&&o.parent.hasMarkup(t,e.attrs)}};for(var r in e)o[r]=e[r];return new c(o)}function A(t,e,n){n?t.classList.add(e):t.classList.remove(e)}var S="ProseMirror-menubar";function B(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent;return!/Edge\/\d/.test(t)&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t)}function F(t){return new o.Plugin({view:function(e){return new P(e,t)}})}var P=function(t,n){var i=this;this.editorView=t,this.options=n,this.wrapper=e("div",{class:S+"-wrapper"}),this.menu=this.wrapper.appendChild(e("div",{class:S})),this.menu.className=S,this.spacer=null,t.dom.parentNode.replaceChild(this.wrapper,t.dom),this.wrapper.appendChild(t.dom),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1;var o=M(this.editorView,this.options.content),r=o.dom,s=o.update;if(this.contentUpdate=s,this.menu.appendChild(r),this.update(),n.floating&&!B()){this.updateFloat();var a=R(this.wrapper);this.scrollFunc=function(t){var e=i.editorView.root;(e.body||e).contains(i.wrapper)?i.updateFloat(t.target.getBoundingClientRect&&t.target):a.forEach(function(t){return t.removeEventListener("scroll",i.scrollFunc)})},a.forEach(function(t){return t.addEventListener("scroll",i.scrollFunc)})}};function D(t){return t.anchorNode==t.focusNode?t.anchorOffset>t.focusOffset:t.anchorNode.compareDocumentPosition(t.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function k(t){for(var e=t.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}function R(t){for(var e=[window],n=t.parentNode;n;n=n.parentNode)e.push(n);return e}P.prototype.update=function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},P.prototype.updateScrollCursor=function(){var t=this.editorView.root.getSelection();if(t.focusNode){var e=t.getRangeAt(0).getClientRects(),n=e[D(t)?0:e.length-1];if(n){var i=this.menu.getBoundingClientRect();if(n.top<i.bottom&&n.bottom>i.top){var o=k(this.wrapper);o&&(o.scrollTop-=i.bottom-n.top)}}}},P.prototype.updateFloat=function(t){var n=this.wrapper,i=n.getBoundingClientRect(),o=t?Math.max(0,t.getBoundingClientRect().top):0;if(this.floating)if(i.top>=o||i.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var r=(n.offsetWidth-n.clientWidth)/2;this.menu.style.left=i.left+r+"px",this.menu.style.display=i.top>window.innerHeight?"none":"",t&&(this.menu.style.top=o+"px")}else if(i.top<o&&i.bottom>=this.menu.offsetHeight+10){this.floating=!0;var s=this.menu.getBoundingClientRect();this.menu.style.left=s.left+"px",this.menu.style.width=s.width+"px",t&&(this.menu.style.top=o+"px"),this.menu.style.position="fixed",this.spacer=e("div",{class:S+"-spacer",style:"height: "+s.height+"px"}),n.insertBefore(this.spacer,this.menu)}},P.prototype.destroy=function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)},exports.MenuItem=c,exports.Dropdown=w,exports.DropdownSubmenu=y,exports.renderGrouped=M,exports.icons=x,exports.joinUpItem=z,exports.liftItem=N,exports.selectParentNodeItem=C,exports.undoItem=E,exports.redoItem=L,exports.wrapItem=H,exports.blockTypeItem=I,exports.menuBar=F;
},{"crel":"F9fT","prosemirror-commands":"ysQj","prosemirror-history":"Q4pH","prosemirror-state":"+fmv"}],"u5Ak":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-state"),t=require("prosemirror-transform"),n=function(e,t){this.match=e,this.handler="string"==typeof t?r(t):t};function r(e){return function(t,n,r,o){var s=e;if(n[1]){var u=n[0].lastIndexOf(n[1]);s+=n[0].slice(u+n[1].length);var i=(r+=u)-o;i>0&&(s=n[0].slice(u-i,u)+s,r=o)}return t.tr.insertText(s,r,o)}}var o=500;function s(t){var n=t.rules,r=new e.Plugin({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,t,o,s){return u(e,t,o,s,n,r)},handleDOMEvents:{compositionend:function(e){setTimeout(function(){var t=e.state.selection.$cursor;t&&u(e,t.pos,t.pos,"",n,r)})}}},isInputRules:!0});return r}function u(e,t,n,r,s,u){if(e.composing)return!1;var i=e.state,a=i.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-o),a.parentOffset,null,"")+r,p=0;p<s.length;p++){var c=s[p].match.exec(l),f=c&&s[p].handler(i,c,t-(c[0].length-r.length),n);if(f)return e.dispatch(f.setMeta(u,{transform:f,from:t,to:n,text:r})),!0}return!1}function i(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var o=n[r],s=void 0;if(o.spec.isInputRules&&(s=o.getState(e))){if(t){for(var u=e.tr,i=s.transform,a=i.steps.length-1;a>=0;a--)u.step(i.steps[a].invert(i.docs[a]));var l=u.doc.resolve(s.from).marks();t(u.replaceWith(s.from,s.to,e.schema.text(s.text,l)))}return!0}}return!1}var a=new n(/--$/,""),l=new n(/\.\.\.$/,""),p=new n(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),c=new n(/"$/,""),f=new n(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),d=new n(/'$/,""),v=[p,c,f,d];function x(e,r,o,s){return new n(e,function(e,n,u,i){var a=o instanceof Function?o(n):o,l=e.tr.delete(u,i),p=l.doc.resolve(u).blockRange(),c=p&&t.findWrapping(p,r,a);if(!c)return null;l.wrap(p,c);var f=l.doc.resolve(u-1).nodeBefore;return f&&f.type==r&&t.canJoin(l.doc,u-1)&&(!s||s(n,f))&&l.join(u-1),l})}function h(e,t,r){return new n(e,function(e,n,o,s){var u=e.doc.resolve(o),i=r instanceof Function?r(n):r;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),t)?e.tr.delete(o,s).setBlockType(o,o,t,i):null})}exports.InputRule=n,exports.inputRules=s,exports.undoInputRule=i,exports.emDash=a,exports.ellipsis=l,exports.openDoubleQuote=p,exports.closeDoubleQuote=c,exports.openSingleQuote=f,exports.closeSingleQuote=d,exports.smartQuotes=v,exports.wrappingInputRule=x,exports.textblockTypeInputRule=h;
},{"prosemirror-state":"+fmv","prosemirror-transform":"0zfz"}],"bLmX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-keymap"),t=require("prosemirror-history"),n=require("prosemirror-commands"),r=require("prosemirror-state"),o=require("prosemirror-dropcursor"),i=require("prosemirror-gapcursor"),a=require("prosemirror-menu"),l=require("prosemirror-schema-list"),u=require("prosemirror-inputrules"),s="ProseMirror-prompt";function c(e){var t=document.body.appendChild(document.createElement("div"));t.className=s;var n=function(e){t.contains(e.target)||r()};setTimeout(function(){return window.addEventListener("mousedown",n)},50);var r=function(){window.removeEventListener("mousedown",n),t.parentNode&&t.parentNode.removeChild(t)},o=[];for(var i in e.fields)o.push(e.fields[i].render());var a=document.createElement("button");a.type="submit",a.className=s+"-submit",a.textContent="OK";var l=document.createElement("button");l.type="button",l.className=s+"-cancel",l.textContent="Cancel",l.addEventListener("click",r);var u=t.appendChild(document.createElement("form"));e.title&&(u.appendChild(document.createElement("h5")).textContent=e.title),o.forEach(function(e){u.appendChild(document.createElement("div")).appendChild(e)});var c=u.appendChild(document.createElement("div"));c.className=s+"-buttons",c.appendChild(a),c.appendChild(document.createTextNode(" ")),c.appendChild(l);var p=t.getBoundingClientRect();t.style.top=(window.innerHeight-p.height)/2+"px",t.style.left=(window.innerWidth-p.width)/2+"px";var m=function(){var t=d(e.fields,o);t&&(r(),e.callback(t))};u.addEventListener("submit",function(e){e.preventDefault(),m()}),u.addEventListener("keydown",function(e){27==e.keyCode?(e.preventDefault(),r()):13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey?9==e.keyCode&&window.setTimeout(function(){t.contains(document.activeElement)||r()},500):(e.preventDefault(),m())});var f=u.elements[0];f&&f.focus()}function d(e,t){var n=Object.create(null),r=0;for(var o in e){var i=e[o],a=t[r++],l=i.read(a),u=i.validate(l);if(u)return p(a,u),null;n[o]=i.clean(l)}return n}function p(e,t){var n=e.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=e.offsetLeft+e.offsetWidth+2+"px",r.style.top=e.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=t,setTimeout(function(){return n.removeChild(r)},1500)}var m=function(e){this.options=e};m.prototype.read=function(e){return e.value},m.prototype.validateType=function(e){},m.prototype.validate=function(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)},m.prototype.clean=function(e){return this.options.clean?this.options.clean(e):e};var f=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e},t}(m),h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this,t=document.createElement("select");return this.options.options.forEach(function(n){var r=t.appendChild(document.createElement("option"));r.value=n.value,r.selected=n.value==e.options.value,r.label=n.label}),t},t}(m);function v(e,t){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1}function g(e){return new a.MenuItem({title:"Insert image",label:"Image",enable:function(t){return v(t,e)},run:function(t,n,o){var i=t.selection,a=i.from,l=i.to,u=null;t.selection instanceof r.NodeSelection&&t.selection.node.type==e&&(u=t.selection.node.attrs),c({title:"Insert image",fields:{src:new f({label:"Location",required:!0,value:u&&u.src}),title:new f({label:"Title",value:u&&u.title}),alt:new f({label:"Description",value:u?u.alt:t.doc.textBetween(a,l," ")})},callback:function(t){o.dispatch(o.state.tr.replaceSelectionWith(e.createAndFill(t))),o.focus()}})}})}function k(e,t){var n={label:t.title,run:e};for(var r in t)n[r]=t[r];return t.enable&&!0!==t.enable||t.select||(n[t.enable?"enable":"select"]=function(t){return e(t)}),new a.MenuItem(n)}function b(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(r,i,t)}function y(e,t){var r={active:function(t){return b(t,e)},enable:!0};for(var o in t)r[o]=t[o];return k(n.toggleMark(e),r)}function w(e){return new a.MenuItem({title:"Add or remove link",icon:a.icons.link,active:function(t){return b(t,e)},enable:function(e){return!e.selection.empty},run:function(t,r,o){if(b(t,e))return n.toggleMark(e)(t,r),!0;c({title:"Create a link",fields:{href:new f({label:"Link target",required:!0}),title:new f({label:"Title"})},callback:function(t){n.toggleMark(e,t)(o.state,o.dispatch),o.focus()}})}})}function C(e,t){return k(l.wrapInList(e,t.attrs),t)}function M(e){var t,n={};if((t=e.marks.strong)&&(n.toggleStrong=y(t,{title:"Toggle strong style",icon:a.icons.strong})),(t=e.marks.em)&&(n.toggleEm=y(t,{title:"Toggle emphasis",icon:a.icons.em})),(t=e.marks.code)&&(n.toggleCode=y(t,{title:"Toggle code font",icon:a.icons.code})),(t=e.marks.link)&&(n.toggleLink=w(t)),(t=e.nodes.image)&&(n.insertImage=g(t)),(t=e.nodes.bullet_list)&&(n.wrapBulletList=C(t,{title:"Wrap in bullet list",icon:a.icons.bulletList})),(t=e.nodes.ordered_list)&&(n.wrapOrderedList=C(t,{title:"Wrap in ordered list",icon:a.icons.orderedList})),(t=e.nodes.blockquote)&&(n.wrapBlockQuote=a.wrapItem(t,{title:"Wrap in block quote",icon:a.icons.blockquote})),(t=e.nodes.paragraph)&&(n.makeParagraph=a.blockTypeItem(t,{title:"Change to paragraph",label:"Plain"})),(t=e.nodes.code_block)&&(n.makeCodeBlock=a.blockTypeItem(t,{title:"Change to code block",label:"Code"})),t=e.nodes.heading)for(var r=1;r<=10;r++)n["makeHead"+r]=a.blockTypeItem(t,{title:"Change to heading "+r,label:"Level "+r,attrs:{level:r}});if(t=e.nodes.horizontal_rule){var o=t;n.insertHorizontalRule=new a.MenuItem({title:"Insert horizontal rule",label:"Horizontal rule",enable:function(e){return v(e,o)},run:function(e,t){t(e.tr.replaceSelectionWith(o.create()))}})}var i=function(e){return e.filter(function(e){return e})};return n.insertMenu=new a.Dropdown(i([n.insertImage,n.insertHorizontalRule]),{label:"Insert"}),n.typeMenu=new a.Dropdown(i([n.makeParagraph,n.makeCodeBlock,n.makeHead1&&new a.DropdownSubmenu(i([n.makeHead1,n.makeHead2,n.makeHead3,n.makeHead4,n.makeHead5,n.makeHead6]),{label:"Heading"})]),{label:"Type..."}),n.inlineMenu=[i([n.toggleStrong,n.toggleEm,n.toggleCode,n.toggleLink])],n.blockMenu=[i([n.wrapBulletList,n.wrapOrderedList,n.wrapBlockQuote,a.joinUpItem,a.liftItem,a.selectParentNodeItem])],n.fullMenu=n.inlineMenu.concat([[n.insertMenu,n.typeMenu]],[[a.undoItem,a.redoItem]],n.blockMenu),n}var I="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function E(e,r){var o,i={};function a(e,t){if(r){var n=r[e];if(!1===n)return;n&&(e=n)}i[e]=t}if(a("Mod-z",t.undo),a("Shift-Mod-z",t.redo),a("Backspace",u.undoInputRule),I||a("Mod-y",t.redo),a("Alt-ArrowUp",n.joinUp),a("Alt-ArrowDown",n.joinDown),a("Mod-BracketLeft",n.lift),a("Escape",n.selectParentNode),(o=e.marks.strong)&&a("Mod-b",n.toggleMark(o)),(o=e.marks.em)&&a("Mod-i",n.toggleMark(o)),(o=e.marks.code)&&a("Mod-`",n.toggleMark(o)),(o=e.nodes.bullet_list)&&a("Shift-Ctrl-8",l.wrapInList(o)),(o=e.nodes.ordered_list)&&a("Shift-Ctrl-9",l.wrapInList(o)),(o=e.nodes.blockquote)&&a("Ctrl->",n.wrapIn(o)),o=e.nodes.hard_break){var s=o,c=n.chainCommands(n.exitCode,function(e,t){return t(e.tr.replaceSelectionWith(s.create()).scrollIntoView()),!0});a("Mod-Enter",c),a("Shift-Enter",c),I&&a("Ctrl-Enter",c)}if((o=e.nodes.list_item)&&(a("Enter",l.splitListItem(o)),a("Mod-[",l.liftListItem(o)),a("Mod-]",l.sinkListItem(o))),(o=e.nodes.paragraph)&&a("Shift-Ctrl-0",n.setBlockType(o)),(o=e.nodes.code_block)&&a("Shift-Ctrl-\\",n.setBlockType(o)),o=e.nodes.heading)for(var d=1;d<=6;d++)a("Shift-Ctrl-"+d,n.setBlockType(o,{level:d}));if(o=e.nodes.horizontal_rule){var p=o;a("Mod-_",function(e,t){return t(e.tr.replaceSelectionWith(p.create()).scrollIntoView()),!0})}return i}function L(e){return u.wrappingInputRule(/^\s*>\s$/,e)}function _(e){return u.wrappingInputRule(/^(\d+)\.\s$/,e,function(e){return{order:+e[1]}},function(e,t){return t.childCount+t.attrs.order==+e[1]})}function x(e){return u.wrappingInputRule(/^\s*([-+*])\s$/,e)}function T(e){return u.textblockTypeInputRule(/^```$/,e)}function q(e,t){return u.textblockTypeInputRule(new RegExp("^(#{1,"+t+"})\\s$"),e,function(e){return{level:e[1].length}})}function S(e){var t,n=u.smartQuotes.concat(u.ellipsis,u.emDash);return(t=e.nodes.blockquote)&&n.push(L(t)),(t=e.nodes.ordered_list)&&n.push(_(t)),(t=e.nodes.bullet_list)&&n.push(x(t)),(t=e.nodes.code_block)&&n.push(T(t)),(t=e.nodes.heading)&&n.push(q(t,6)),u.inputRules({rules:n})}function B(l){var u=[S(l.schema),e.keymap(E(l.schema,l.mapKeys)),e.keymap(n.baseKeymap),o.dropCursor(),i.gapCursor()];return!1!==l.menuBar&&u.push(a.menuBar({floating:!1!==l.floatingMenu,content:l.menuContent||M(l.schema).fullMenu})),!1!==l.history&&u.push(t.history()),u.concat(new r.Plugin({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}exports.buildMenuItems=M,exports.buildKeymap=E,exports.buildInputRules=S,exports.exampleSetup=B;
},{"prosemirror-keymap":"MRdg","prosemirror-history":"Q4pH","prosemirror-commands":"ysQj","prosemirror-state":"+fmv","prosemirror-dropcursor":"4gyH","prosemirror-gapcursor":"Np5C","prosemirror-menu":"5gaU","prosemirror-schema-list":"DPVH","prosemirror-inputrules":"u5Ak"}],"xeQV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e,r=require("prosemirror-state"),n=require("prosemirror-view"),o=require("prosemirror-model"),i=require("prosemirror-schema-basic"),c=require("prosemirror-schema-list"),u=require("prosemirror-example-setup");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}function m(t){var e="function"==typeof Map?new Map:void 0;return(m=function(t){if(null===t||!v(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return b(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,t)})(t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t,e,r){return(b=h()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&w(o,r.prototype),o}).apply(null,arguments)}function v(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=(t=x("text-editor"))(e=function(t){function e(){return s(this,e),l(this,g(e).call(this))}return y(e,m(HTMLElement)),p(e,[{key:"connectedCallback",value:function(){var t=new o.Schema({nodes:(0,c.addListNodes)(i.schema.spec.nodes,"paragraph block*","block"),marks:i.schema.spec.marks}),e=this;this.editor=new n.EditorView(e,{state:r.EditorState.create({doc:o.DOMParser.fromSchema(t).parse(document.createTextNode("")),plugins:(0,u.exampleSetup)({schema:t}).concat([new O])}),dispatchTransaction:function(t){var r=this.state.apply(t);this.updateState(r),e.dispatchEvent(new CustomEvent("document-change",{detail:r.doc.content.toJSON()}))}})}}]),e}())||e,O=function(t){function e(){return s(this,e),l(this,g(e).call(this,{props:{decorations:e.decorations}}))}return y(e,r.Plugin),p(e,null,[{key:"decorations",value:function(t){var e=t.doc,r=[];return e.content.forEach(function(t,e){if("paragraph"===t.type.name&&0!==t.content.size){var o=t.content.firstChild;if(o&&"text"===o.type.name){var i=o.text.trim();r.push(n.Decoration.widget(e+t.content.size+1,function(){var t=document.createElement("div");return t.className="widget--word-count",t.appendChild(document.createTextNode("Words: ".concat(i.split(" ").length))),t}))}}}),n.DecorationSet.create(e,r)}}]),e}();function x(t){return function(e){window.customElements.define(t,e)}}var E=S;exports.default=E;
},{"prosemirror-state":"+fmv","prosemirror-view":"Lkgx","prosemirror-model":"8m5x","prosemirror-schema-basic":"Kb9Q","prosemirror-schema-list":"DPVH","prosemirror-example-setup":"bLmX"}],"H99C":[function(require,module,exports) {
"use strict";var e=require("./elm/Main.elm");require("./js/TextEditor"),function(){var i=document.createElement("div");document.body.appendChild(i),e.Elm.Main.init({node:i,flags:[]})}();
},{"./elm/Main.elm":"bmN7","./js/TextEditor":"xeQV"}]},{},["H99C"], null)
//# sourceMappingURL=src.1862f17b.js.map